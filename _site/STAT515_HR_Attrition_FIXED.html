<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rutvij &amp; Sean Grieg">
<meta name="dcterms.date" content="2025-12-14">

<title>IBM HR Employee Attrition Analysis: Predictive Modeling for Workforce Retention – STAT 515 Final Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-a6e161b2431e1f94a14e0f5d32135a3c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-f78df75c894ad2ea722f04417f8702c7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">



</head>

<body class="floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STAT 515 Final Project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./projectcode.html"> 
<span class="menu-text">Project Code</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#executive-summary" id="toc-executive-summary" class="nav-link active" data-scroll-target="#executive-summary"><span class="header-section-number">1</span> Executive Summary</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">2</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background"><span class="header-section-number">2.1</span> Background</a></li>
  <li><a href="#research-questions" id="toc-research-questions" class="nav-link" data-scroll-target="#research-questions"><span class="header-section-number">2.2</span> Research Questions</a></li>
  <li><a href="#dataset-description" id="toc-dataset-description" class="nav-link" data-scroll-target="#dataset-description"><span class="header-section-number">2.3</span> Dataset Description</a></li>
  </ul></li>
  <li><a href="#data-exploration-and-summary-statistics" id="toc-data-exploration-and-summary-statistics" class="nav-link" data-scroll-target="#data-exploration-and-summary-statistics"><span class="header-section-number">3</span> Data Exploration and Summary Statistics</a>
  <ul class="collapse">
  <li><a href="#class-imbalance-analysis" id="toc-class-imbalance-analysis" class="nav-link" data-scroll-target="#class-imbalance-analysis"><span class="header-section-number">3.1</span> Class Imbalance Analysis</a></li>
  <li><a href="#attrition-by-key-categorical-variables" id="toc-attrition-by-key-categorical-variables" class="nav-link" data-scroll-target="#attrition-by-key-categorical-variables"><span class="header-section-number">3.2</span> Attrition by Key Categorical Variables</a></li>
  <li><a href="#chi-square-tests-for-categorical-associations" id="toc-chi-square-tests-for-categorical-associations" class="nav-link" data-scroll-target="#chi-square-tests-for-categorical-associations"><span class="header-section-number">3.3</span> Chi-Square Tests for Categorical Associations</a></li>
  <li><a href="#numeric-variables-comparison" id="toc-numeric-variables-comparison" class="nav-link" data-scroll-target="#numeric-variables-comparison"><span class="header-section-number">3.4</span> Numeric Variables Comparison</a></li>
  </ul></li>
  <li><a href="#research-question-1" id="toc-research-question-1" class="nav-link" data-scroll-target="#research-question-1"><span class="header-section-number">4</span> Research Question 1</a>
  <ul class="collapse">
  <li><a href="#work-life-imbalance-attrition-risk-profiling" id="toc-work-life-imbalance-attrition-risk-profiling" class="nav-link" data-scroll-target="#work-life-imbalance-attrition-risk-profiling">Work-Life Imbalance &amp; Attrition Risk Profiling</a></li>
  <li><a href="#decision-tree-model" id="toc-decision-tree-model" class="nav-link" data-scroll-target="#decision-tree-model"><span class="header-section-number">4.1</span> Decision Tree Model</a></li>
  <li><a href="#logistic-regression-with-interaction-terms" id="toc-logistic-regression-with-interaction-terms" class="nav-link" data-scroll-target="#logistic-regression-with-interaction-terms"><span class="header-section-number">4.2</span> Logistic Regression with Interaction Terms</a></li>
  <li><a href="#random-forest-model" id="toc-random-forest-model" class="nav-link" data-scroll-target="#random-forest-model"><span class="header-section-number">4.3</span> Random Forest Model</a></li>
  </ul></li>
  <li><a href="#research-question-2" id="toc-research-question-2" class="nav-link" data-scroll-target="#research-question-2"><span class="header-section-number">5</span> Research Question 2</a>
  <ul class="collapse">
  <li><a href="#career-stagnation-compensation-effects" id="toc-career-stagnation-compensation-effects" class="nav-link" data-scroll-target="#career-stagnation-compensation-effects">Career Stagnation &amp; Compensation Effects</a></li>
  <li><a href="#traintest-split-weighted-logistic-regression" id="toc-traintest-split-weighted-logistic-regression" class="nav-link" data-scroll-target="#traintest-split-weighted-logistic-regression"><span class="header-section-number">5.1</span> Train/Test Split + Weighted Logistic Regression</a></li>
  <li><a href="#lasso-variable-selection" id="toc-lasso-variable-selection" class="nav-link" data-scroll-target="#lasso-variable-selection"><span class="header-section-number">5.2</span> LASSO Variable Selection</a></li>
  <li><a href="#roc-auc-and-threshold-analysis-test-set" id="toc-roc-auc-and-threshold-analysis-test-set" class="nav-link" data-scroll-target="#roc-auc-and-threshold-analysis-test-set"><span class="header-section-number">5.3</span> ROC-AUC and Threshold Analysis (Test Set)</a></li>
  </ul></li>
  <li><a href="#research-question-3" id="toc-research-question-3" class="nav-link" data-scroll-target="#research-question-3"><span class="header-section-number">6</span> Research Question 3</a>
  <ul class="collapse">
  <li><a href="#department-stratified-satisfaction-analysis" id="toc-department-stratified-satisfaction-analysis" class="nav-link" data-scroll-target="#department-stratified-satisfaction-analysis">Department-Stratified Satisfaction Analysis</a></li>
  <li><a href="#vif-analysis-for-multicollinearity" id="toc-vif-analysis-for-multicollinearity" class="nav-link" data-scroll-target="#vif-analysis-for-multicollinearity"><span class="header-section-number">6.1</span> VIF Analysis for Multicollinearity</a></li>
  <li><a href="#stratified-logistic-regression-by-department" id="toc-stratified-logistic-regression-by-department" class="nav-link" data-scroll-target="#stratified-logistic-regression-by-department"><span class="header-section-number">6.2</span> Stratified Logistic Regression by Department</a></li>
  </ul></li>
  <li><a href="#discussion-and-conclusions" id="toc-discussion-and-conclusions" class="nav-link" data-scroll-target="#discussion-and-conclusions"><span class="header-section-number">7</span> Discussion and Conclusions</a>
  <ul class="collapse">
  <li><a href="#recommendations-for-hr-practice" id="toc-recommendations-for-hr-practice" class="nav-link" data-scroll-target="#recommendations-for-hr-practice"><span class="header-section-number">7.1</span> Recommendations for HR Practice</a></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations"><span class="header-section-number">7.2</span> Limitations</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">8</span> References</a></li>
  <li><a href="#appendix-session-information" id="toc-appendix-session-information" class="nav-link" data-scroll-target="#appendix-session-information"><span class="header-section-number">9</span> Appendix: Session Information</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">IBM HR Employee Attrition Analysis: Predictive Modeling for Workforce Retention</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
<p class="subtitle lead">STAT 515 Final Project</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Rutvij &amp; Sean Grieg </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 14, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="executive-summary" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Executive Summary</h1>
<p>This comprehensive statistical analysis investigates the factors contributing to employee attrition using the IBM HR Analytics Employee Attrition &amp; Performance dataset (n=1470). The study addresses three primary research questions using decision trees, random forests, logistic regression with interaction terms, LASSO variable selection, and stratified departmental analysis.</p>
<p><strong>Key Findings (computed from models below):</strong></p>
<ol type="1">
<li><p><strong>Work-Life Imbalance:</strong> OverTime is the strongest predictor of attrition. Decision tree analysis identifies high-risk profiles combining overtime work with low tenure.</p></li>
<li><p><strong>Career Stagnation &amp; Compensation:</strong> Years since last promotion increases attrition risk, and LASSO selects the strongest predictors across work-life, pay, and tenure.</p></li>
<li><p><strong>Department-Stratified Satisfaction:</strong> Satisfaction variables show different predictive patterns across departments.</p></li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Dataset Overview:</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>- Total Employees: 1470 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>- Overall Attrition Rate: 16.1 %</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>- Employees Who Left: 237 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>- OverTime Attrition Rate: 30.5 %</code></pre>
</div>
</div>
<hr>
</section>
<section id="introduction" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Introduction</h1>
<section id="background" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="background"><span class="header-section-number">2.1</span> Background</h2>
<p>Employee turnover represents one of the most significant challenges facing modern organizations. Industry estimates suggest replacing an employee can cost a substantial fraction of their annual salary when accounting for recruiting, training, and lost productivity. Understanding the factors that drive employees to leave enables targeted retention strategies before valuable talent departs.</p>
<p>This analysis leverages the IBM HR Analytics dataset (realistic, simulated dataset commonly used for HR analytics). The dataset contains 1,470 employee records with 39 attributes spanning demographics, job characteristics, satisfaction metrics, and work-life balance indicators.</p>
</section>
<section id="research-questions" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="research-questions"><span class="header-section-number">2.2</span> Research Questions</h2>
<p><span style="color: orange; font-weight: bold;">An explanation of why these research questions were chosen would be nice</span></p>
<ol type="1">
<li><p><strong>Work-Life Imbalance &amp; Attrition Risk Profiling:</strong> How do work-life factors (OverTime, DistanceFromHome, WorkLifeBalance, YearsAtCompany) interact to predict attrition, and can we identify distinct “high-risk” profiles?</p></li>
<li><p><strong>Career Stagnation &amp; Compensation Effects:</strong> At what thresholds do career stagnation indicators (YearsSinceLastPromotion, YearsInCurrentRole) combined with compensation (MonthlyIncome, PercentSalaryHike) become critical predictors of attrition?</p></li>
<li><p><strong>Department-Stratified Satisfaction Analysis:</strong> Does the predictive power of satisfaction variables (JobSatisfaction, EnvironmentSatisfaction, RelationshipSatisfaction) differ across departments, and which matters most within each?</p></li>
</ol>
</section>
<section id="dataset-description" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="dataset-description"><span class="header-section-number">2.3</span> Dataset Description</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Dataset Dimensions: 1470 employees, 41 variables</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover caption-top table-sm small">
<caption>Table 1: Key Variables by Research Question</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Description</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Research Q</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; width: 25%; font-weight: bold;">Attrition</td>
<td style="text-align: left; width: 60%;">Employee left the company (Yes/No) - Response Variable</td>
<td style="text-align: left; width: 15%;">All</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 25%; font-weight: bold;">OverTime</td>
<td style="text-align: left; width: 60%;">Whether employee works overtime (Yes/No)</td>
<td style="text-align: left; width: 15%;">Q1</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 25%; font-weight: bold;">DistanceFromHome</td>
<td style="text-align: left; width: 60%;">Distance from home to workplace (miles)</td>
<td style="text-align: left; width: 15%;">Q1</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 25%; font-weight: bold;">WorkLifeBalance</td>
<td style="text-align: left; width: 60%;">Work-life balance rating (1-4, higher = better)</td>
<td style="text-align: left; width: 15%;">Q1</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 25%; font-weight: bold;">YearsAtCompany</td>
<td style="text-align: left; width: 60%;">Total years at current company</td>
<td style="text-align: left; width: 15%;">Q1</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 25%; font-weight: bold;">YearsSinceLastPromotion</td>
<td style="text-align: left; width: 60%;">Years since last promotion</td>
<td style="text-align: left; width: 15%;">Q2</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 25%; font-weight: bold;">YearsInCurrentRole</td>
<td style="text-align: left; width: 60%;">Years in current role</td>
<td style="text-align: left; width: 15%;">Q2</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 25%; font-weight: bold;">MonthlyIncome</td>
<td style="text-align: left; width: 60%;">Monthly salary</td>
<td style="text-align: left; width: 15%;">Q2</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 25%; font-weight: bold;">PercentSalaryHike</td>
<td style="text-align: left; width: 60%;">Percent salary increase</td>
<td style="text-align: left; width: 15%;">Q2</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 25%; font-weight: bold;">JobLevel</td>
<td style="text-align: left; width: 60%;">Job level within company hierarchy (1-5)</td>
<td style="text-align: left; width: 15%;">Q2</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 25%; font-weight: bold;">JobSatisfaction</td>
<td style="text-align: left; width: 60%;">Job satisfaction rating (1-4)</td>
<td style="text-align: left; width: 15%;">Q3</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 25%; font-weight: bold;">EnvironmentSatisfaction</td>
<td style="text-align: left; width: 60%;">Environment satisfaction rating (1-4)</td>
<td style="text-align: left; width: 15%;">Q3</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 25%; font-weight: bold;">RelationshipSatisfaction</td>
<td style="text-align: left; width: 60%;">Relationship satisfaction rating (1-4)</td>
<td style="text-align: left; width: 15%;">Q3</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 25%; font-weight: bold;">Department</td>
<td style="text-align: left; width: 60%;">Department</td>
<td style="text-align: left; width: 15%;">Q3</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
</section>
<section id="data-exploration-and-summary-statistics" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Data Exploration and Summary Statistics</h1>
<section id="class-imbalance-analysis" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="class-imbalance-analysis"><span class="header-section-number">3.1</span> Class Imbalance Analysis</h2>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STAT515_HR_Attrition_FIXED_files/figure-html/class-imbalance-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption>Figure 1: Attrition Distribution - Class Imbalance</figcaption>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Class Weights for Imbalanced Learning:</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>- Weight for Class 0 (No Attrition): 0.5961 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>- Weight for Class 1 (Attrition): 3.1013 </code></pre>
</div>
</div>
<p>The dataset exhibits a significant class imbalance in employee attrition, with 83.9% of employees (1,233) having “No” as their attrition value and only 16.1% (237) having “Yes.” This imbalance can challenge predictive modeling, as algorithms may be biased toward the majority class. To mitigate this, class weights were calculated inversely proportional to class frequencies, assigning a weight of 0.5961 to the majority class (No attrition) and 3.1013 to the minority class (Yes attrition). These weights can be applied during model training to give greater importance to underrepresented cases, improving the model’s ability to correctly identify employees at risk of leaving.</p>
</section>
<section id="attrition-by-key-categorical-variables" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="attrition-by-key-categorical-variables"><span class="header-section-number">3.2</span> Attrition by Key Categorical Variables</h2>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STAT515_HR_Attrition_FIXED_files/figure-html/categorical-eda-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption>Figure 2: Attrition Rates by Key Categorical Variables</figcaption>
</figure>
</div>
</div>
</div>
<p>The graphical analysis suggests that employee attrition varies substantially across several workplace and demographic factors. Employees who work overtime show a markedly higher attrition rate (30.5%) compared to those who do not work overtime (10.4%), indicating overtime may be a strong contributor to turnover. Attrition also differs by department, with Sales experiencing the highest rate (20.6%), followed by HR (19%), while Research &amp; Development has the lowest attrition (13.8%). Marital status appears to be associated with attrition as well, as single employees have a notably higher turnover rate (25.5%) than married (12.5%) or divorced employees (10.1%). Finally, business travel frequency shows a clear pattern: employees who travel frequently have the highest attrition rate (24.9%), followed by those who travel rarely (15%), while non-traveling employees have the lowest attrition (8%). Overall, these graphs indicate that workload demands, job role characteristics, and personal circumstances may play important roles in employee turnover.</p>
</section>
<section id="chi-square-tests-for-categorical-associations" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="chi-square-tests-for-categorical-associations"><span class="header-section-number">3.3</span> Chi-Square Tests for Categorical Associations</h2>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-hover caption-top table-sm small">
<caption>Table 2: Chi-Square Tests for Categorical Variables</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">χ²</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p-value</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Cramer's V</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sig.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">OverTime</td>
<td style="text-align: right;">87.56</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.2441</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">Department</td>
<td style="text-align: right;">10.80</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.0045256</td>
<td style="text-align: right;">0.0857</td>
<td style="text-align: left;">**</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">JobRole</td>
<td style="text-align: right;">86.19</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.2421</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">MaritalStatus</td>
<td style="text-align: right;">46.16</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.1772</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">BusinessTravel</td>
<td style="text-align: right;">24.18</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.0000056</td>
<td style="text-align: right;">0.1283</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">Gender</td>
<td style="text-align: right;">1.12</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.2905724</td>
<td style="text-align: right;">0.0276</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>OverTime and JobRole show the strongest relationships with attrition, both highly significant (p &lt; 0.001) and exhibiting moderate effect sizes, suggesting that employees’ overtime status and job roles are meaningfully related to the likelihood of leaving the company. MaritalStatus and BusinessTravel are also highly significant, though with smaller effect sizes, indicating weaker but still relevant associations with attrition. Department shows a statistically significant relationship with attrition as well, but the small effect size suggests a limited practical impact. In contrast, Gender is not significantly associated with attrition, and its negligible effect size indicates that it is unlikely to influence whether an employee leaves the organization.</p>
</section>
<section id="numeric-variables-comparison" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="numeric-variables-comparison"><span class="header-section-number">3.4</span> Numeric Variables Comparison</h2>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STAT515_HR_Attrition_FIXED_files/figure-html/numeric-comparison-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption>Figure 3: Distribution of Key Numeric Variables by Attrition Status</figcaption>
</figure>
</div>
</div>
</div>
<p>When examining key numerical values in our analysis, we observe noticeable differences in attrition rates across employee categories. Attrition was more common among younger employees, those with lower monthly incomes, and employees with fewer years at the company. Additionally, employees who worked farther from home exhibited higher rates of attrition.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-hover caption-top table-sm small">
<caption>Table 3: T-Tests Comparing Numeric Variables by Attrition Status</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Mean (No)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Mean (Yes)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Difference</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p-value</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sig.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">mean in group No</td>
<td style="text-align: left;">Age</td>
<td style="text-align: right;">37.56</td>
<td style="text-align: right;">33.61</td>
<td style="text-align: right;">-3.95</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">mean in group No1</td>
<td style="text-align: left;">MonthlyIncome</td>
<td style="text-align: right;">6832.74</td>
<td style="text-align: right;">4787.09</td>
<td style="text-align: right;">-2045.65</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">mean in group No2</td>
<td style="text-align: left;">DistanceFromHome</td>
<td style="text-align: right;">8.92</td>
<td style="text-align: right;">10.63</td>
<td style="text-align: right;">1.72</td>
<td style="text-align: right;">0.0041365</td>
<td style="text-align: left;">**</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">mean in group No3</td>
<td style="text-align: left;">YearsAtCompany</td>
<td style="text-align: right;">7.37</td>
<td style="text-align: right;">5.13</td>
<td style="text-align: right;">-2.24</td>
<td style="text-align: right;">0.0000002</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">mean in group No4</td>
<td style="text-align: left;">YearsInCurrentRole</td>
<td style="text-align: right;">4.48</td>
<td style="text-align: right;">2.90</td>
<td style="text-align: right;">-1.58</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">mean in group No5</td>
<td style="text-align: left;">YearsSinceLastPromotion</td>
<td style="text-align: right;">2.23</td>
<td style="text-align: right;">1.95</td>
<td style="text-align: right;">-0.29</td>
<td style="text-align: right;">0.1986513</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">mean in group No6</td>
<td style="text-align: left;">TotalWorkingYears</td>
<td style="text-align: right;">11.86</td>
<td style="text-align: right;">8.24</td>
<td style="text-align: right;">-3.62</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">mean in group No7</td>
<td style="text-align: left;">JobSatisfaction</td>
<td style="text-align: right;">2.78</td>
<td style="text-align: right;">2.47</td>
<td style="text-align: right;">-0.31</td>
<td style="text-align: right;">0.0001052</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">mean in group No8</td>
<td style="text-align: left;">EnvironmentSatisfaction</td>
<td style="text-align: right;">2.77</td>
<td style="text-align: right;">2.46</td>
<td style="text-align: right;">-0.31</td>
<td style="text-align: right;">0.0002092</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">mean in group No9</td>
<td style="text-align: left;">WorkLifeBalance</td>
<td style="text-align: right;">2.78</td>
<td style="text-align: right;">2.66</td>
<td style="text-align: right;">-0.12</td>
<td style="text-align: right;">0.0304657</td>
<td style="text-align: left;">*</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
</section>
<section id="research-question-1" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Research Question 1</h1>
<section id="work-life-imbalance-attrition-risk-profiling" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="work-life-imbalance-attrition-risk-profiling">Work-Life Imbalance &amp; Attrition Risk Profiling</h2>
<p><strong>How do work-life factors (OverTime, DistanceFromHome, WorkLifeBalance, YearsAtCompany) interact to predict employee attrition, and can we identify distinct “high-risk” employee profiles using these variables?</strong></p>
</section>
<section id="decision-tree-model" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="decision-tree-model"><span class="header-section-number">4.1</span> Decision Tree Model</h2>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STAT515_HR_Attrition_FIXED_files/figure-html/q1-decision-tree-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption>Figure 4: Decision Tree for Work-Life Attrition Risk Profiling</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STAT515_HR_Attrition_FIXED_files/figure-html/dt-importance-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption>Figure 5: Decision Tree Feature Importance</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction   0   1
         0 249  21
         1 119  52
                                          
               Accuracy : 0.6825          
                 95% CI : (0.6368, 0.7258)
    No Information Rate : 0.8345          
    P-Value [Acc &gt; NIR] : 1               
                                          
                  Kappa : 0.2529          
                                          
 Mcnemar's Test P-Value : 2.444e-16       
                                          
            Sensitivity : 0.6766          
            Specificity : 0.7123          
         Pos Pred Value : 0.9222          
         Neg Pred Value : 0.3041          
             Prevalence : 0.8345          
         Detection Rate : 0.5646          
   Detection Prevalence : 0.6122          
      Balanced Accuracy : 0.6945          
                                          
       'Positive' Class : 0               
                                          </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Decision Tree AUC-ROC: 0.7084 </code></pre>
</div>
</div>
</section>
<section id="logistic-regression-with-interaction-terms" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="logistic-regression-with-interaction-terms"><span class="header-section-number">4.2</span> Logistic Regression with Interaction Terms</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Attrition_Binary ~ OverTime_Binary + DistanceFromHome + 
    WorkLifeBalance + YearsAtCompany + OT_x_WLB + OT_x_Distance + 
    OT_x_YearsAtCompany, family = binomial(link = "logit"), data = hr_q1)

Coefficients:
                    Estimate Std. Error z value Pr(&gt;|z|)   
(Intercept)         -1.14314    0.41339  -2.765  0.00569 **
OverTime_Binary      0.89098    0.63757   1.397  0.16227   
DistanceFromHome     0.01648    0.01195   1.380  0.16760   
WorkLifeBalance     -0.30426    0.13679  -2.224  0.02613 * 
YearsAtCompany      -0.05304    0.02098  -2.528  0.01148 * 
OT_x_WLB             0.20612    0.20979   0.982  0.32586   
OT_x_Distance        0.02246    0.01814   1.238  0.21561   
OT_x_YearsAtCompany -0.06240    0.03301  -1.890  0.05875 . 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1298.6  on 1469  degrees of freedom
Residual deviance: 1167.0  on 1462  degrees of freedom
AIC: 1183

Number of Fisher Scoring iterations: 5</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-hover caption-top table-sm small">
<caption>Table 4: Logistic Regression Odds Ratios (Q1)</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">β</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">OR</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">95% CI Lower</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">95% CI Upper</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p-value</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sig.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">OverTime_Binary</td>
<td style="text-align: right;">0.8910</td>
<td style="text-align: right;">2.4375</td>
<td style="text-align: right;">0.6998</td>
<td style="text-align: right;">8.5502</td>
<td style="text-align: right;">0.1623</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">DistanceFromHome</td>
<td style="text-align: right;">0.0165</td>
<td style="text-align: right;">1.0166</td>
<td style="text-align: right;">0.9926</td>
<td style="text-align: right;">1.0403</td>
<td style="text-align: right;">0.1676</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">WorkLifeBalance</td>
<td style="text-align: right;">-0.3043</td>
<td style="text-align: right;">0.7377</td>
<td style="text-align: right;">0.5653</td>
<td style="text-align: right;">0.9671</td>
<td style="text-align: right;">0.0261</td>
<td style="text-align: left;">*</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">YearsAtCompany</td>
<td style="text-align: right;">-0.0530</td>
<td style="text-align: right;">0.9483</td>
<td style="text-align: right;">0.9081</td>
<td style="text-align: right;">0.9860</td>
<td style="text-align: right;">0.0115</td>
<td style="text-align: left;">*</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">OT_x_WLB</td>
<td style="text-align: right;">0.2061</td>
<td style="text-align: right;">1.2289</td>
<td style="text-align: right;">0.8137</td>
<td style="text-align: right;">1.8538</td>
<td style="text-align: right;">0.3259</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">OT_x_Distance</td>
<td style="text-align: right;">0.0225</td>
<td style="text-align: right;">1.0227</td>
<td style="text-align: right;">0.9872</td>
<td style="text-align: right;">1.0600</td>
<td style="text-align: right;">0.2156</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">OT_x_YearsAtCompany</td>
<td style="text-align: right;">-0.0624</td>
<td style="text-align: right;">0.9395</td>
<td style="text-align: right;">0.8796</td>
<td style="text-align: right;">1.0016</td>
<td style="text-align: right;">0.0588</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="random-forest-model" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="random-forest-model"><span class="header-section-number">4.3</span> Random Forest Model</h2>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STAT515_HR_Attrition_FIXED_files/figure-html/q1-random-forest-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption>Figure 6: Random Forest Variable Importance</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STAT515_HR_Attrition_FIXED_files/figure-html/q1-roc-comparison-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption>Figure 7: ROC Curves Comparison - Q1 Models</figcaption>
</figure>
</div>
</div>
</div>
<hr>
</section>
</section>
<section id="research-question-2" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Research Question 2</h1>
<section id="career-stagnation-compensation-effects" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="career-stagnation-compensation-effects">Career Stagnation &amp; Compensation Effects</h2>
<p><strong>At what thresholds do career stagnation indicators (YearsSinceLastPromotion, YearsInCurrentRole) combined with compensation factors (MonthlyIncome, PercentSalaryHike) become critical predictors of attrition?</strong></p>
</section>
<section id="traintest-split-weighted-logistic-regression" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="traintest-split-weighted-logistic-regression"><span class="header-section-number">5.1</span> Train/Test Split + Weighted Logistic Regression</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = Attrition_Binary ~ YearsSinceLastPromotion + YearsInCurrentRole + 
    MonthlyIncome + PercentSalaryHike + JobLevel, family = binomial(), 
    data = train_q2, weights = weights_q2)

Coefficients:
                          Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)              1.757e+00  3.319e-01   5.293 1.20e-07 ***
YearsSinceLastPromotion  1.428e-01  2.757e-02   5.180 2.22e-07 ***
YearsInCurrentRole      -1.780e-01  2.683e-02  -6.635 3.24e-11 ***
MonthlyIncome           -9.407e-05  5.010e-05  -1.878  0.06045 .  
PercentSalaryHike       -5.107e-02  1.844e-02  -2.770  0.00561 ** 
JobLevel                -6.872e-02  2.009e-01  -0.342  0.73233    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1426.5  on 1028  degrees of freedom
Residual deviance: 1309.6  on 1023  degrees of freedom
AIC: 1740.9

Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-hover caption-top table-sm small">
<caption>Table 5: Weighted Logistic Regression Odds Ratios (Q2)</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">β</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">OR</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">95% CI Lower</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">95% CI Upper</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p-value</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Sig.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">YearsSinceLastPromotion</td>
<td style="text-align: right;">0.1428</td>
<td style="text-align: right;">1.1535</td>
<td style="text-align: right;">1.0935</td>
<td style="text-align: right;">1.2185</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">YearsInCurrentRole</td>
<td style="text-align: right;">-0.1780</td>
<td style="text-align: right;">0.8369</td>
<td style="text-align: right;">0.7933</td>
<td style="text-align: right;">0.8814</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: left;">***</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">MonthlyIncome</td>
<td style="text-align: right;">-0.0001</td>
<td style="text-align: right;">0.9999</td>
<td style="text-align: right;">0.9998</td>
<td style="text-align: right;">1.0000</td>
<td style="text-align: right;">0.0604</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">PercentSalaryHike</td>
<td style="text-align: right;">-0.0511</td>
<td style="text-align: right;">0.9502</td>
<td style="text-align: right;">0.9163</td>
<td style="text-align: right;">0.9850</td>
<td style="text-align: right;">0.0056</td>
<td style="text-align: left;">**</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">JobLevel</td>
<td style="text-align: right;">-0.0687</td>
<td style="text-align: right;">0.9336</td>
<td style="text-align: right;">0.6297</td>
<td style="text-align: right;">1.3855</td>
<td style="text-align: right;">0.7323</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="lasso-variable-selection" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="lasso-variable-selection"><span class="header-section-number">5.2</span> LASSO Variable Selection</h2>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STAT515_HR_Attrition_FIXED_files/figure-html/q2-lasso-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption>Figure 8: LASSO Cross-Validation</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STAT515_HR_Attrition_FIXED_files/figure-html/lasso-coefficients-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption>Figure 9: LASSO Selected Variable Coefficients</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-hover caption-top table-sm small">
<caption>Table 6: LASSO Selected Variables</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Coefficient</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">OverTime_Binary</td>
<td style="text-align: right;">1.6306</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">StockOptionLevel</td>
<td style="text-align: right;">-0.5456</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">EnvironmentSatisfaction</td>
<td style="text-align: right;">-0.3751</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">JobSatisfaction</td>
<td style="text-align: right;">-0.3263</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">WorkLifeBalance</td>
<td style="text-align: right;">-0.2454</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">YearsSinceLastPromotion</td>
<td style="text-align: right;">0.1537</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">NumCompaniesWorked</td>
<td style="text-align: right;">0.1486</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">YearsInCurrentRole</td>
<td style="text-align: right;">-0.1228</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">YearsWithCurrManager</td>
<td style="text-align: right;">-0.1221</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">JobLevel</td>
<td style="text-align: right;">-0.0816</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">YearsAtCompany</td>
<td style="text-align: right;">0.0723</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">TotalWorkingYears</td>
<td style="text-align: right;">-0.0478</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">Age</td>
<td style="text-align: right;">-0.0364</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">DistanceFromHome</td>
<td style="text-align: right;">0.0348</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">PercentSalaryHike</td>
<td style="text-align: right;">-0.0159</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="roc-auc-and-threshold-analysis-test-set" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="roc-auc-and-threshold-analysis-test-set"><span class="header-section-number">5.3</span> ROC-AUC and Threshold Analysis (Test Set)</h2>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STAT515_HR_Attrition_FIXED_files/figure-html/q2-roc-threshold-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption>Figure 10: ROC Curve and Threshold Analysis (Test Set)</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-hover caption-top table-sm small">
<caption>Table 7: Classification Performance at Different Thresholds (Test Set)</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">Threshold</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Sensitivity</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Specificity</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Accuracy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Note</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.100</td>
<td style="text-align: right;">0.973</td>
<td style="text-align: right;">0.043</td>
<td style="text-align: right;">0.197</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: right;">0.200</td>
<td style="text-align: right;">0.959</td>
<td style="text-align: right;">0.117</td>
<td style="text-align: right;">0.256</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.300</td>
<td style="text-align: right;">0.918</td>
<td style="text-align: right;">0.283</td>
<td style="text-align: right;">0.388</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: right;">0.400</td>
<td style="text-align: right;">0.781</td>
<td style="text-align: right;">0.413</td>
<td style="text-align: right;">0.474</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.500</td>
<td style="text-align: right;">0.699</td>
<td style="text-align: right;">0.562</td>
<td style="text-align: right;">0.585</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: right; font-weight: bold; background-color: rgba(212, 237, 218, 255) !important;">0.574</td>
<td style="text-align: right; font-weight: bold; background-color: rgba(212, 237, 218, 255) !important;">0.589</td>
<td style="text-align: right; font-weight: bold; background-color: rgba(212, 237, 218, 255) !important;">0.728</td>
<td style="text-align: right; font-weight: bold; background-color: rgba(212, 237, 218, 255) !important;">0.705</td>
<td style="text-align: left; font-weight: bold; background-color: rgba(212, 237, 218, 255) !important;">← Optimal (Youden's J)</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
</section>
<section id="research-question-3" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Research Question 3</h1>
<section id="department-stratified-satisfaction-analysis" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="department-stratified-satisfaction-analysis">Department-Stratified Satisfaction Analysis</h2>
<p><strong>Does the predictive power of employee satisfaction variables differ across departments?</strong></p>
</section>
<section id="vif-analysis-for-multicollinearity" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="vif-analysis-for-multicollinearity"><span class="header-section-number">6.1</span> VIF Analysis for Multicollinearity</h2>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-hover caption-top table-sm small">
<caption>Table 8: Variance Inflation Factors (VIF)</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">VIF</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">JobSatisfaction</td>
<td style="text-align: right;">1.0011</td>
<td style="text-align: left;">OK</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">EnvironmentSatisfaction</td>
<td style="text-align: right;">1.0012</td>
<td style="text-align: left;">OK</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">RelationshipSatisfaction</td>
<td style="text-align: right;">1.0046</td>
<td style="text-align: left;">OK</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">WorkLifeBalance</td>
<td style="text-align: right;">1.0045</td>
<td style="text-align: left;">OK</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">JobInvolvement</td>
<td style="text-align: right;">1.0039</td>
<td style="text-align: left;">OK</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold;">MonthlyIncome</td>
<td style="text-align: right;">1.3345</td>
<td style="text-align: left;">OK</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold;">Age</td>
<td style="text-align: right;">1.3376</td>
<td style="text-align: left;">OK</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><span style="color: orange; font-weight: bold;">Why are these 7 variables being selected for VIF? I get the 3 satisfaction variables because they were mentioned in the data set description as being used for question 3, but why the others? There are a lot of outputs in the project, but I’m not sure why the specific variables or methods were chosen</span></p>
<p>The Variance Inflation Factor (VIF) analysis for the selected variables indicates that there is no evidence of multicollinearity among the independent variables included in the model. All VIF values are very close to 1, ranging from approximately 1.00 to 1.34, which suggests that each predictor has minimal correlation with the others. Since all values are well below commonly accepted thresholds (such as 5 or 10), multicollinearity is not a concern in this analysis. Therefore, all variables can be retained in the model without risk of inflated standard errors or unstable coefficient estimates.</p>
</section>
<section id="stratified-logistic-regression-by-department" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="stratified-logistic-regression-by-department"><span class="header-section-number">6.2</span> Stratified Logistic Regression by Department</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
========================================
DEPARTMENT: HR 
========================================
Sample Size: 63 
Attrition Rate: 19 %

Call:
glm(formula = Attrition_Binary ~ JobSatisfaction + EnvironmentSatisfaction + 
    RelationshipSatisfaction, family = binomial(), data = df_dept)

Coefficients:
                         Estimate Std. Error z value Pr(&gt;|z|)
(Intercept)                0.1371     1.5933   0.086    0.931
JobSatisfaction           -0.5074     0.3211  -1.580    0.114
EnvironmentSatisfaction   -0.3877     0.3239  -1.197    0.231
RelationshipSatisfaction   0.2198     0.3434   0.640    0.522

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 61.351  on 62  degrees of freedom
Residual deviance: 56.601  on 59  degrees of freedom
AIC: 64.601

Number of Fisher Scoring iterations: 4


========================================
DEPARTMENT: R&amp;D 
========================================
Sample Size: 961 
Attrition Rate: 13.8 %

Call:
glm(formula = Attrition_Binary ~ JobSatisfaction + EnvironmentSatisfaction + 
    RelationshipSatisfaction, family = binomial(), data = df_dept)

Coefficients:
                         Estimate Std. Error z value Pr(&gt;|z|)   
(Intercept)               0.05548    0.39463   0.141  0.88820   
JobSatisfaction          -0.26624    0.08489  -3.136  0.00171 **
EnvironmentSatisfaction  -0.25997    0.08450  -3.077  0.00209 **
RelationshipSatisfaction -0.19146    0.08718  -2.196  0.02809 * 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 772.73  on 960  degrees of freedom
Residual deviance: 749.18  on 957  degrees of freedom
AIC: 757.18

Number of Fisher Scoring iterations: 4


========================================
DEPARTMENT: Sales 
========================================
Sample Size: 446 
Attrition Rate: 20.6 %

Call:
glm(formula = Attrition_Binary ~ JobSatisfaction + EnvironmentSatisfaction + 
    RelationshipSatisfaction, family = binomial(), data = df_dept)

Coefficients:
                         Estimate Std. Error z value Pr(&gt;|z|)  
(Intercept)              -0.03132    0.49683  -0.063   0.9497  
JobSatisfaction          -0.22829    0.10514  -2.171   0.0299 *
EnvironmentSatisfaction  -0.22291    0.10875  -2.050   0.0404 *
RelationshipSatisfaction -0.04758    0.10540  -0.451   0.6517  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 454.01  on 445  degrees of freedom
Residual deviance: 444.72  on 442  degrees of freedom
AIC: 452.72

Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STAT515_HR_Attrition_FIXED_files/figure-html/q3-coefficient-comparison-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption>Figure 11: Satisfaction Variable Coefficients by Department</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Table 9: Department Model Comparison
</caption>
<thead>
<tr>
<th style="text-align:left;">
Department
</th>
<th style="text-align:right;">
N
</th>
<th style="text-align:right;">
Attrition Rate (%)
</th>
<th style="text-align:right;">
AIC
</th>
<th style="text-align:right;">
AUC
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
HR
</td>
<td style="text-align:right;">
63
</td>
<td style="text-align:right;">
19.0
</td>
<td style="text-align:right;">
64.60
</td>
<td style="text-align:right;">
0.679
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
R&amp;D
</td>
<td style="text-align:right;">
961
</td>
<td style="text-align:right;">
13.8
</td>
<td style="text-align:right;">
757.18
</td>
<td style="text-align:right;">
0.616
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Sales
</td>
<td style="text-align:right;">
446
</td>
<td style="text-align:right;">
20.6
</td>
<td style="text-align:right;">
452.72
</td>
<td style="text-align:right;">
0.597
</td>
</tr>
</tbody>
</table>
<p>Figure 12: Model Performance by Department</p>
</div>
</div>
<hr>
<p>The stratified logistic regression results reveal notable differences across departments in how satisfaction metrics relate to attrition.</p>
<p>In the HR department (n = 63, 19% attrition), none of the predictors (JobSatisfaction, EnvironmentSatisfaction, or RelationshipSatisfaction) are statistically significant, likely due to the small sample size, though the output suggests that higher job and environment satisfaction ratings could reduce attrition.</p>
<p>In R&amp;D (n = 961, 13.8% attrition), all three satisfaction measures are significant predictors: higher job, environment, and relationship satisfaction are associated with lower attrition, with job and environment satisfaction having the strongest effects. In Sales (n = 446, 20.6% attrition), job and environment satisfaction significantly reduce attrition, while relationship satisfaction is not significant. Overall, the results suggest that the effect of satisfaction on attrition varies by department.</p>
<p>R&amp;D appears most sensitive to satisfaction levels, with Sales being moderately sensitive, and HR shows no clear patterns, likely reflecting limited sample size or unmeasured factors. These findings indicate that department-specific strategies—focusing on improving job and environment satisfaction—could be most effective in reducing turnover, while HR may require a broader analysis of attrition drivers.</p>
<hr>
</section>
</section>
<section id="discussion-and-conclusions" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Discussion and Conclusions</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>=============================================</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>SUMMARY STATISTICS</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>=============================================</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Total Employees Analyzed: 1470 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Overall Attrition Rate: 16.1 %</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>OverTime Attrition Rate: 30.5 %</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Non-OverTime Attrition Rate: 10.4 %</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Best Model Performance:</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>- Random Forest AUC (Q1): 0.619 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>- Weighted LR AUC (Q2 test): 0.665 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>- Optimal Threshold (Q2 test): 0.574 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>- LASSO Variables Selected: 15 of 16</code></pre>
</div>
</div>
<section id="recommendations-for-hr-practice" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="recommendations-for-hr-practice"><span class="header-section-number">7.1</span> Recommendations for HR Practice</h2>
<ol type="1">
<li><strong>Monitor Overtime:</strong> Overtime is consistently among the strongest predictors of attrition.</li>
<li><strong>Promotion Cadence:</strong> Stagnation signals (especially time since last promotion) meaningfully shift attrition risk.</li>
<li><strong>Department-Specific Actions:</strong> Satisfaction signals and their strengths differ by department.</li>
</ol>
</section>
<section id="limitations" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="limitations"><span class="header-section-number">7.2</span> Limitations</h2>
<p>Due to employee and corporate confidentiality concerns, publicly available datasets containing detailed employee information are limited. While the dataset used in this project serves as a realistic approximation of HR records for a large organization and can inform analyses and decision-making strategies relevant to real-world company data, it is still a synthetic dataset.</p>
<p>Class imbalance within the dataset presented analytical challenges. Employee attrition, being a minority class, required careful threshold adjustments to ensure sensitivity and avoid biased predictive outcomes.</p>
<p>The dataset did not include information regarding the reasons for employee departures. Distinguishing between voluntary resignations and terminations could have allowed for more targeted analyses, such as identifying employees the company might have retained versus those who were dismissed.</p>
<p>The dataset represents a cross-sectional snapshot, which allows for the identification of associations but not causal relationships. Factors influencing attrition may vary significantly among individual employees, limiting the ability to draw definitive causal conclusions.</p>
<hr>
</section>
</section>
<section id="references" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> References</h1>
<ol type="1">
<li>IBM HR Analytics Employee Attrition Dataset. Available at: https://data.world/aaizemberg/hr-employee-attrition<br>
</li>
<li>James, G., Witten, D., Hastie, T., &amp; Tibshirani, R. (2021). <em>An Introduction to Statistical Learning (2nd ed.).</em> Springer.<br>
</li>
<li>Hosmer, D. W., Lemeshow, S., &amp; Sturdivant, R. X. (2013). <em>Applied Logistic Regression (3rd ed.).</em> Wiley.<br>
</li>
<li>Breiman, L. (2001). Random Forests. <em>Machine Learning, 45</em>(1), 5–32.<br>
</li>
<li>Tibshirani, R. (1996). Regression Shrinkage and Selection via the Lasso. <em>JRSS Series B, 58</em>(1), 267–288.<br>
</li>
<li>R Core Team. (2024). <em>R: A Language and Environment for Statistical Computing.</em></li>
</ol>
<hr>
</section>
<section id="appendix-session-information" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Appendix: Session Information</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.1 (2025-06-13 ucrt)
Platform: x86_64-w64-mingw32/x64
Running under: Windows 11 x64 (build 26200)

Matrix products: default
  LAPACK version 3.12.1

locale:
[1] LC_COLLATE=English_United States.utf8 
[2] LC_CTYPE=English_United States.utf8   
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.utf8    

time zone: America/New_York
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] rlang_1.1.6          gridExtra_2.3        pROC_1.19.0.1       
 [4] glmnet_4.1-10        Matrix_1.7-3         randomForest_4.7-1.2
 [7] rpart.plot_3.1.3     rpart_4.1.24         caret_7.0-1         
[10] lattice_0.22-7       car_3.1-3            carData_3.0-5       
[13] corrplot_0.95        scales_1.4.0         kableExtra_1.4.0    
[16] knitr_1.50           tidyr_1.3.1          ggplot2_3.5.2       
[19] dplyr_1.1.4          readxl_1.4.5        

loaded via a namespace (and not attached):
 [1] tidyselect_1.2.1     viridisLite_0.4.2    timeDate_4051.111   
 [4] farver_2.1.2         fastmap_1.2.0        digest_0.6.37       
 [7] timechange_0.3.0     lifecycle_1.0.4      survival_3.8-3      
[10] magrittr_2.0.3       compiler_4.5.1       tools_4.5.1         
[13] yaml_2.3.10          data.table_1.17.8    labeling_0.4.3      
[16] htmlwidgets_1.6.4    plyr_1.8.9           xml2_1.4.0          
[19] RColorBrewer_1.1-3   abind_1.4-8          withr_3.0.2         
[22] purrr_1.1.0          stats4_4.5.1         nnet_7.3-20         
[25] grid_4.5.1           e1071_1.7-16         future_1.68.0       
[28] globals_0.18.0       iterators_1.0.14     MASS_7.3-65         
[31] dichromat_2.0-0.1    cli_3.6.5            rmarkdown_2.29      
[34] generics_0.1.4       rstudioapi_0.17.1    future.apply_1.20.0 
[37] reshape2_1.4.5       proxy_0.4-27         stringr_1.5.2       
[40] splines_4.5.1        parallel_4.5.1       cellranger_1.1.0    
[43] vctrs_0.6.5          hardhat_1.4.2        jsonlite_2.0.0      
[46] Formula_1.2-5        listenv_0.10.0       systemfonts_1.3.1   
[49] foreach_1.5.2        gower_1.0.2          recipes_1.3.1       
[52] glue_1.8.0           parallelly_1.45.1    codetools_0.2-20    
[55] shape_1.4.6.1        lubridate_1.9.4      stringi_1.8.7       
[58] gtable_0.3.6         tibble_3.3.0         pillar_1.11.0       
[61] htmltools_0.5.8.1    ipred_0.9-15         lava_1.8.2          
[64] R6_2.6.1             textshaping_1.0.3    evaluate_1.0.5      
[67] class_7.3-23         Rcpp_1.1.0           svglite_2.2.2       
[70] nlme_3.1-168         prodlim_2025.04.28   xfun_0.52           
[73] pkgconfig_2.0.3      ModelMetrics_1.2.2.2</code></pre>
</div>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "IBM HR Employee Attrition Analysis: Predictive Modeling for Workforce Retention"</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "STAT 515 Final Project"</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Rutvij &amp; Sean Grieg"</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> today</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 3</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-summary: "Show Code"</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: cosmo</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-width: 10</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-height: 7</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: false</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup}</span></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart)</span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glmnet)</span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pROC)</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlang)</span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">515</span>)</span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>possible_paths <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data/HR_Data.xlsx"</span>,</span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">"HR_Data.xlsx"</span>,</span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a>  <span class="st">"./data/HR_Data.xlsx"</span>,</span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a>  <span class="st">"./HR_Data.xlsx"</span></span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (p <span class="cf">in</span> possible_paths) {</span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">file.exists</span>(p)) {</span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a>    data_path <span class="ot">&lt;-</span> p</span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.null</span>(data_path)) {</span>
<span id="cb28-62"><a href="#cb28-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Current working directory:"</span>, <span class="fu">getwd</span>(), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-63"><a href="#cb28-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Files in current directory:"</span>, <span class="fu">paste</span>(<span class="fu">list.files</span>(), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-64"><a href="#cb28-64" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">dir.exists</span>(<span class="st">"data"</span>)) {</span>
<span id="cb28-65"><a href="#cb28-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Files in data folder:"</span>, <span class="fu">paste</span>(<span class="fu">list.files</span>(<span class="st">"data"</span>), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-66"><a href="#cb28-66" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-67"><a href="#cb28-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"HR_Data.xlsx not found. Please ensure it's in the project folder or 'data' subfolder."</span>)</span>
<span id="cb28-68"><a href="#cb28-68" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-69"><a href="#cb28-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-70"><a href="#cb28-70" aria-hidden="true" tabindex="-1"></a>hr_data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(data_path)</span>
<span id="cb28-71"><a href="#cb28-71" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Data loaded successfully from:"</span>, data_path, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-72"><a href="#cb28-72" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-73"><a href="#cb28-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-74"><a href="#cb28-74" aria-hidden="true" tabindex="-1"></a><span class="in">```{r standardize-columns}</span></span>
<span id="cb28-75"><a href="#cb28-75" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: standardize-columns</span></span>
<span id="cb28-76"><a href="#cb28-76" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb28-77"><a href="#cb28-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-78"><a href="#cb28-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Robustly standardize column names across common IBM HR dataset variants</span></span>
<span id="cb28-79"><a href="#cb28-79" aria-hidden="true" tabindex="-1"></a>resolve_col <span class="ot">&lt;-</span> <span class="cf">function</span>(df, candidates) {</span>
<span id="cb28-80"><a href="#cb28-80" aria-hidden="true" tabindex="-1"></a>  hit <span class="ot">&lt;-</span> candidates[candidates <span class="sc">%in%</span> <span class="fu">names</span>(df)][<span class="dv">1</span>]</span>
<span id="cb28-81"><a href="#cb28-81" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(hit)) <span class="fu">stop</span>(<span class="st">"Missing expected column. Tried: "</span>, <span class="fu">paste</span>(candidates, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb28-82"><a href="#cb28-82" aria-hidden="true" tabindex="-1"></a>  hit</span>
<span id="cb28-83"><a href="#cb28-83" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-84"><a href="#cb28-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-85"><a href="#cb28-85" aria-hidden="true" tabindex="-1"></a>col_map <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb28-86"><a href="#cb28-86" aria-hidden="true" tabindex="-1"></a>  <span class="at">Attrition                 =</span> <span class="fu">c</span>(<span class="st">"Attrition"</span>),</span>
<span id="cb28-87"><a href="#cb28-87" aria-hidden="true" tabindex="-1"></a>  <span class="at">OverTime                  =</span> <span class="fu">c</span>(<span class="st">"Over Time"</span>, <span class="st">"OverTime"</span>),</span>
<span id="cb28-88"><a href="#cb28-88" aria-hidden="true" tabindex="-1"></a>  <span class="at">DistanceFromHome          =</span> <span class="fu">c</span>(<span class="st">"Distance From Home"</span>, <span class="st">"DistanceFromHome"</span>),</span>
<span id="cb28-89"><a href="#cb28-89" aria-hidden="true" tabindex="-1"></a>  <span class="at">WorkLifeBalance           =</span> <span class="fu">c</span>(<span class="st">"Work Life Balance"</span>, <span class="st">"WorkLifeBalance"</span>),</span>
<span id="cb28-90"><a href="#cb28-90" aria-hidden="true" tabindex="-1"></a>  <span class="at">YearsAtCompany            =</span> <span class="fu">c</span>(<span class="st">"Years At Company"</span>, <span class="st">"YearsAtCompany"</span>),</span>
<span id="cb28-91"><a href="#cb28-91" aria-hidden="true" tabindex="-1"></a>  <span class="at">YearsSinceLastPromotion   =</span> <span class="fu">c</span>(<span class="st">"Years Since Last Promotion"</span>, <span class="st">"YearsSinceLastPromotion"</span>),</span>
<span id="cb28-92"><a href="#cb28-92" aria-hidden="true" tabindex="-1"></a>  <span class="at">YearsInCurrentRole        =</span> <span class="fu">c</span>(<span class="st">"Years In Current Role"</span>, <span class="st">"YearsInCurrentRole"</span>),</span>
<span id="cb28-93"><a href="#cb28-93" aria-hidden="true" tabindex="-1"></a>  <span class="at">MonthlyIncome             =</span> <span class="fu">c</span>(<span class="st">"Monthly Income"</span>, <span class="st">"MonthlyIncome"</span>),</span>
<span id="cb28-94"><a href="#cb28-94" aria-hidden="true" tabindex="-1"></a>  <span class="at">PercentSalaryHike         =</span> <span class="fu">c</span>(<span class="st">"Percent Salary Hike"</span>, <span class="st">"PercentSalaryHike"</span>),</span>
<span id="cb28-95"><a href="#cb28-95" aria-hidden="true" tabindex="-1"></a>  <span class="at">JobLevel                  =</span> <span class="fu">c</span>(<span class="st">"Job Level"</span>, <span class="st">"JobLevel"</span>),</span>
<span id="cb28-96"><a href="#cb28-96" aria-hidden="true" tabindex="-1"></a>  <span class="at">JobSatisfaction           =</span> <span class="fu">c</span>(<span class="st">"Job Satisfaction"</span>, <span class="st">"JobSatisfaction"</span>),</span>
<span id="cb28-97"><a href="#cb28-97" aria-hidden="true" tabindex="-1"></a>  <span class="at">EnvironmentSatisfaction   =</span> <span class="fu">c</span>(<span class="st">"Environment Satisfaction"</span>, <span class="st">"EnvironmentSatisfaction"</span>),</span>
<span id="cb28-98"><a href="#cb28-98" aria-hidden="true" tabindex="-1"></a>  <span class="at">RelationshipSatisfaction  =</span> <span class="fu">c</span>(<span class="st">"Relationship Satisfaction"</span>, <span class="st">"RelationshipSatisfaction"</span>),</span>
<span id="cb28-99"><a href="#cb28-99" aria-hidden="true" tabindex="-1"></a>  <span class="at">JobInvolvement            =</span> <span class="fu">c</span>(<span class="st">"Job Involvement"</span>, <span class="st">"JobInvolvement"</span>),</span>
<span id="cb28-100"><a href="#cb28-100" aria-hidden="true" tabindex="-1"></a>  <span class="at">YearsWithCurrManager      =</span> <span class="fu">c</span>(<span class="st">"Years With Curr Manager"</span>, <span class="st">"Years With Current Manager"</span>,</span>
<span id="cb28-101"><a href="#cb28-101" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"YearsWithCurrManager"</span>, <span class="st">"YearsWithCurrentManager"</span>),</span>
<span id="cb28-102"><a href="#cb28-102" aria-hidden="true" tabindex="-1"></a>  <span class="at">TotalWorkingYears         =</span> <span class="fu">c</span>(<span class="st">"Total Working Years"</span>, <span class="st">"TotalWorkingYears"</span>),</span>
<span id="cb28-103"><a href="#cb28-103" aria-hidden="true" tabindex="-1"></a>  <span class="at">NumCompaniesWorked        =</span> <span class="fu">c</span>(<span class="st">"Num Companies Worked"</span>, <span class="st">"NumCompaniesWorked"</span>),</span>
<span id="cb28-104"><a href="#cb28-104" aria-hidden="true" tabindex="-1"></a>  <span class="at">StockOptionLevel          =</span> <span class="fu">c</span>(<span class="st">"Stock Option Level"</span>, <span class="st">"StockOptionLevel"</span>),</span>
<span id="cb28-105"><a href="#cb28-105" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age                       =</span> <span class="fu">c</span>(<span class="st">"Age"</span>),</span>
<span id="cb28-106"><a href="#cb28-106" aria-hidden="true" tabindex="-1"></a>  <span class="at">Department                =</span> <span class="fu">c</span>(<span class="st">"Department"</span>),</span>
<span id="cb28-107"><a href="#cb28-107" aria-hidden="true" tabindex="-1"></a>  <span class="at">BusinessTravel            =</span> <span class="fu">c</span>(<span class="st">"Business Travel"</span>, <span class="st">"BusinessTravel"</span>),</span>
<span id="cb28-108"><a href="#cb28-108" aria-hidden="true" tabindex="-1"></a>  <span class="at">MaritalStatus             =</span> <span class="fu">c</span>(<span class="st">"Marital Status"</span>, <span class="st">"MaritalStatus"</span>),</span>
<span id="cb28-109"><a href="#cb28-109" aria-hidden="true" tabindex="-1"></a>  <span class="at">Gender                    =</span> <span class="fu">c</span>(<span class="st">"Gender"</span>),</span>
<span id="cb28-110"><a href="#cb28-110" aria-hidden="true" tabindex="-1"></a>  <span class="at">JobRole                   =</span> <span class="fu">c</span>(<span class="st">"Job Role"</span>, <span class="st">"JobRole"</span>)</span>
<span id="cb28-111"><a href="#cb28-111" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-112"><a href="#cb28-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-113"><a href="#cb28-113" aria-hidden="true" tabindex="-1"></a>rename_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb28-114"><a href="#cb28-114" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (new_nm <span class="cf">in</span> <span class="fu">names</span>(col_map)) {</span>
<span id="cb28-115"><a href="#cb28-115" aria-hidden="true" tabindex="-1"></a>  old_nm <span class="ot">&lt;-</span> <span class="fu">resolve_col</span>(hr_data, col_map[[new_nm]])</span>
<span id="cb28-116"><a href="#cb28-116" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (old_nm <span class="sc">!=</span> new_nm) rename_list[[new_nm]] <span class="ot">&lt;-</span> old_nm</span>
<span id="cb28-117"><a href="#cb28-117" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-118"><a href="#cb28-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-119"><a href="#cb28-119" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(rename_list) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb28-120"><a href="#cb28-120" aria-hidden="true" tabindex="-1"></a>  hr_data <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="sc">!!!</span>rename_list)</span>
<span id="cb28-121"><a href="#cb28-121" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-122"><a href="#cb28-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-123"><a href="#cb28-123" aria-hidden="true" tabindex="-1"></a><span class="co"># Create binary features used throughout the report</span></span>
<span id="cb28-124"><a href="#cb28-124" aria-hidden="true" tabindex="-1"></a>hr_data <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span></span>
<span id="cb28-125"><a href="#cb28-125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-126"><a href="#cb28-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">Attrition_Binary =</span> <span class="fu">ifelse</span>(Attrition <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb28-127"><a href="#cb28-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">OverTime_Binary  =</span> <span class="fu">ifelse</span>(OverTime  <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb28-128"><a href="#cb28-128" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-129"><a href="#cb28-129" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-130"><a href="#cb28-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-131"><a href="#cb28-131" aria-hidden="true" tabindex="-1"></a><span class="fu"># Executive Summary</span></span>
<span id="cb28-132"><a href="#cb28-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-133"><a href="#cb28-133" aria-hidden="true" tabindex="-1"></a>This comprehensive statistical analysis investigates the factors contributing to employee attrition using the IBM HR Analytics Employee Attrition &amp; Performance dataset (n=<span class="in">`r nrow(hr_data)`</span>). The study addresses three primary research questions using decision trees, random forests, logistic regression with interaction terms, LASSO variable selection, and stratified departmental analysis.</span>
<span id="cb28-134"><a href="#cb28-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-135"><a href="#cb28-135" aria-hidden="true" tabindex="-1"></a>**Key Findings (computed from models below):**</span>
<span id="cb28-136"><a href="#cb28-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-137"><a href="#cb28-137" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Work-Life Imbalance:** OverTime is the strongest predictor of attrition. Decision tree analysis identifies high-risk profiles combining overtime work with low tenure.</span>
<span id="cb28-138"><a href="#cb28-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-139"><a href="#cb28-139" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Career Stagnation &amp; Compensation:** Years since last promotion increases attrition risk, and LASSO selects the strongest predictors across work-life, pay, and tenure.</span>
<span id="cb28-140"><a href="#cb28-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-141"><a href="#cb28-141" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Department-Stratified Satisfaction:** Satisfaction variables show different predictive patterns across departments.</span>
<span id="cb28-142"><a href="#cb28-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-143"><a href="#cb28-143" aria-hidden="true" tabindex="-1"></a><span class="in">```{r key-stats}</span></span>
<span id="cb28-144"><a href="#cb28-144" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: key-stats</span></span>
<span id="cb28-145"><a href="#cb28-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-146"><a href="#cb28-146" aria-hidden="true" tabindex="-1"></a>n_employees <span class="ot">&lt;-</span> <span class="fu">nrow</span>(hr_data)</span>
<span id="cb28-147"><a href="#cb28-147" aria-hidden="true" tabindex="-1"></a>attrition_rate <span class="ot">&lt;-</span> <span class="fu">mean</span>(hr_data<span class="sc">$</span>Attrition_Binary) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb28-148"><a href="#cb28-148" aria-hidden="true" tabindex="-1"></a>n_attrition <span class="ot">&lt;-</span> <span class="fu">sum</span>(hr_data<span class="sc">$</span>Attrition_Binary)</span>
<span id="cb28-149"><a href="#cb28-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-150"><a href="#cb28-150" aria-hidden="true" tabindex="-1"></a>overtime_attrition <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span></span>
<span id="cb28-151"><a href="#cb28-151" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(OverTime <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-152"><a href="#cb28-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">rate =</span> <span class="fu">mean</span>(Attrition_Binary) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-153"><a href="#cb28-153" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(rate)</span>
<span id="cb28-154"><a href="#cb28-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-155"><a href="#cb28-155" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Dataset Overview:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-156"><a href="#cb28-156" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- Total Employees:"</span>, n_employees, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-157"><a href="#cb28-157" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- Overall Attrition Rate:"</span>, <span class="fu">round</span>(attrition_rate, <span class="dv">1</span>), <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-158"><a href="#cb28-158" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- Employees Who Left:"</span>, n_attrition, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-159"><a href="#cb28-159" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- OverTime Attrition Rate:"</span>, <span class="fu">round</span>(overtime_attrition, <span class="dv">1</span>), <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-160"><a href="#cb28-160" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-161"><a href="#cb28-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-162"><a href="#cb28-162" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb28-163"><a href="#cb28-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-164"><a href="#cb28-164" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb28-165"><a href="#cb28-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-166"><a href="#cb28-166" aria-hidden="true" tabindex="-1"></a><span class="fu">## Background</span></span>
<span id="cb28-167"><a href="#cb28-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-168"><a href="#cb28-168" aria-hidden="true" tabindex="-1"></a>Employee turnover represents one of the most significant challenges facing modern organizations. Industry estimates suggest replacing an employee can cost a substantial fraction of their annual salary when accounting for recruiting, training, and lost productivity. Understanding the factors that drive employees to leave enables targeted retention strategies before valuable talent departs.</span>
<span id="cb28-169"><a href="#cb28-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-170"><a href="#cb28-170" aria-hidden="true" tabindex="-1"></a>This analysis leverages the IBM HR Analytics dataset (realistic, simulated dataset commonly used for HR analytics). The dataset contains 1,470 employee records with 39 attributes spanning demographics, job characteristics, satisfaction metrics, and work-life balance indicators.</span>
<span id="cb28-171"><a href="#cb28-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-172"><a href="#cb28-172" aria-hidden="true" tabindex="-1"></a><span class="fu">## Research Questions</span></span>
<span id="cb28-173"><a href="#cb28-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-174"><a href="#cb28-174" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> style</span><span class="op">=</span><span class="st">"color: orange; font-weight: bold;"</span><span class="dt">&gt;</span>An explanation of why these research questions were chosen would be nice<span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span></span>
<span id="cb28-175"><a href="#cb28-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-176"><a href="#cb28-176" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Work-Life Imbalance &amp; Attrition Risk Profiling:** How do work-life factors (OverTime, DistanceFromHome, WorkLifeBalance, YearsAtCompany) interact to predict attrition, and can we identify distinct "high-risk" profiles?</span>
<span id="cb28-177"><a href="#cb28-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-178"><a href="#cb28-178" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Career Stagnation &amp; Compensation Effects:** At what thresholds do career stagnation indicators (YearsSinceLastPromotion, YearsInCurrentRole) combined with compensation (MonthlyIncome, PercentSalaryHike) become critical predictors of attrition?</span>
<span id="cb28-179"><a href="#cb28-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-180"><a href="#cb28-180" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Department-Stratified Satisfaction Analysis:** Does the predictive power of satisfaction variables (JobSatisfaction, EnvironmentSatisfaction, RelationshipSatisfaction) differ across departments, and which matters most within each?</span>
<span id="cb28-181"><a href="#cb28-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-182"><a href="#cb28-182" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dataset Description</span></span>
<span id="cb28-183"><a href="#cb28-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-186"><a href="#cb28-186" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb28-187"><a href="#cb28-187" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: data-overview</span></span>
<span id="cb28-188"><a href="#cb28-188" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb28-189"><a href="#cb28-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-190"><a href="#cb28-190" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Dataset Dimensions:"</span>, <span class="fu">nrow</span>(hr_data), <span class="st">"employees,"</span>, <span class="fu">ncol</span>(hr_data), <span class="st">"variables</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb28-191"><a href="#cb28-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-192"><a href="#cb28-192" aria-hidden="true" tabindex="-1"></a>variable_desc <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-193"><a href="#cb28-193" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">c</span>(<span class="st">"Attrition"</span>, <span class="st">"OverTime"</span>, <span class="st">"DistanceFromHome"</span>, <span class="st">"WorkLifeBalance"</span>,</span>
<span id="cb28-194"><a href="#cb28-194" aria-hidden="true" tabindex="-1"></a>               <span class="st">"YearsAtCompany"</span>, <span class="st">"YearsSinceLastPromotion"</span>, <span class="st">"YearsInCurrentRole"</span>,</span>
<span id="cb28-195"><a href="#cb28-195" aria-hidden="true" tabindex="-1"></a>               <span class="st">"MonthlyIncome"</span>, <span class="st">"PercentSalaryHike"</span>, <span class="st">"JobLevel"</span>,</span>
<span id="cb28-196"><a href="#cb28-196" aria-hidden="true" tabindex="-1"></a>               <span class="st">"JobSatisfaction"</span>, <span class="st">"EnvironmentSatisfaction"</span>, <span class="st">"RelationshipSatisfaction"</span>,</span>
<span id="cb28-197"><a href="#cb28-197" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Department"</span>),</span>
<span id="cb28-198"><a href="#cb28-198" aria-hidden="true" tabindex="-1"></a>  <span class="at">Description =</span> <span class="fu">c</span>(<span class="st">"Employee left the company (Yes/No) - Response Variable"</span>,</span>
<span id="cb28-199"><a href="#cb28-199" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Whether employee works overtime (Yes/No)"</span>,</span>
<span id="cb28-200"><a href="#cb28-200" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Distance from home to workplace (miles)"</span>,</span>
<span id="cb28-201"><a href="#cb28-201" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Work-life balance rating (1-4, higher = better)"</span>,</span>
<span id="cb28-202"><a href="#cb28-202" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Total years at current company"</span>,</span>
<span id="cb28-203"><a href="#cb28-203" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Years since last promotion"</span>,</span>
<span id="cb28-204"><a href="#cb28-204" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Years in current role"</span>,</span>
<span id="cb28-205"><a href="#cb28-205" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Monthly salary"</span>,</span>
<span id="cb28-206"><a href="#cb28-206" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Percent salary increase"</span>,</span>
<span id="cb28-207"><a href="#cb28-207" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Job level within company hierarchy (1-5)"</span>,</span>
<span id="cb28-208"><a href="#cb28-208" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Job satisfaction rating (1-4)"</span>,</span>
<span id="cb28-209"><a href="#cb28-209" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Environment satisfaction rating (1-4)"</span>,</span>
<span id="cb28-210"><a href="#cb28-210" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Relationship satisfaction rating (1-4)"</span>,</span>
<span id="cb28-211"><a href="#cb28-211" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Department"</span>),</span>
<span id="cb28-212"><a href="#cb28-212" aria-hidden="true" tabindex="-1"></a>  <span class="at">Question =</span> <span class="fu">c</span>(<span class="st">"All"</span>, <span class="st">"Q1"</span>, <span class="st">"Q1"</span>, <span class="st">"Q1"</span>, <span class="st">"Q1"</span>, <span class="st">"Q2"</span>, <span class="st">"Q2"</span>, <span class="st">"Q2"</span>, <span class="st">"Q2"</span>, <span class="st">"Q2"</span>, <span class="st">"Q3"</span>, <span class="st">"Q3"</span>, <span class="st">"Q3"</span>, <span class="st">"Q3"</span>)</span>
<span id="cb28-213"><a href="#cb28-213" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-214"><a href="#cb28-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-215"><a href="#cb28-215" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(variable_desc, <span class="at">caption =</span> <span class="st">"Table 1: Key Variables by Research Question"</span>,</span>
<span id="cb28-216"><a href="#cb28-216" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Variable"</span>, <span class="st">"Description"</span>, <span class="st">"Research Q"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-217"><a href="#cb28-217" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-218"><a href="#cb28-218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>, <span class="at">width =</span> <span class="st">"25%"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-219"><a href="#cb28-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">2</span>, <span class="at">width =</span> <span class="st">"60%"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-220"><a href="#cb28-220" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">3</span>, <span class="at">width =</span> <span class="st">"15%"</span>)</span>
<span id="cb28-221"><a href="#cb28-221" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-222"><a href="#cb28-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-223"><a href="#cb28-223" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb28-224"><a href="#cb28-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-225"><a href="#cb28-225" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Exploration and Summary Statistics</span></span>
<span id="cb28-226"><a href="#cb28-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-227"><a href="#cb28-227" aria-hidden="true" tabindex="-1"></a><span class="fu">## Class Imbalance Analysis</span></span>
<span id="cb28-228"><a href="#cb28-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-229"><a href="#cb28-229" aria-hidden="true" tabindex="-1"></a><span class="in">```{r class-imbalance}</span></span>
<span id="cb28-230"><a href="#cb28-230" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: class-imbalance</span></span>
<span id="cb28-231"><a href="#cb28-231" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 1: Attrition Distribution - Class Imbalance"</span></span>
<span id="cb28-232"><a href="#cb28-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-233"><a href="#cb28-233" aria-hidden="true" tabindex="-1"></a>attrition_dist <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span></span>
<span id="cb28-234"><a href="#cb28-234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Attrition) <span class="sc">%&gt;%</span></span>
<span id="cb28-235"><a href="#cb28-235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Percentage =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb28-236"><a href="#cb28-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-237"><a href="#cb28-237" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(attrition_dist, <span class="fu">aes</span>(<span class="at">x =</span> Attrition, <span class="at">y =</span> n, <span class="at">fill =</span> Attrition)) <span class="sc">+</span></span>
<span id="cb28-238"><a href="#cb28-238" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb28-239"><a href="#cb28-239" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(n, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>, <span class="fu">round</span>(Percentage, <span class="dv">1</span>), <span class="st">"%)"</span>)),</span>
<span id="cb28-240"><a href="#cb28-240" aria-hidden="true" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>, <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb28-241"><a href="#cb28-241" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Attrition Status"</span>,</span>
<span id="cb28-242"><a href="#cb28-242" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Employees"</span>,</span>
<span id="cb28-243"><a href="#cb28-243" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Employee Attrition Distribution"</span>,</span>
<span id="cb28-244"><a href="#cb28-244" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">"Class imbalance: "</span>, <span class="fu">round</span>(<span class="dv">100</span> <span class="sc">-</span> attrition_rate, <span class="dv">1</span>), <span class="st">"% No vs "</span>, <span class="fu">round</span>(attrition_rate, <span class="dv">1</span>), <span class="st">"% Yes"</span>)) <span class="sc">+</span></span>
<span id="cb28-245"><a href="#cb28-245" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-246"><a href="#cb28-246" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb28-247"><a href="#cb28-247" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb28-248"><a href="#cb28-248" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fu">max</span>(attrition_dist<span class="sc">$</span>n) <span class="sc">*</span> <span class="fl">1.15</span>)</span>
<span id="cb28-249"><a href="#cb28-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-250"><a href="#cb28-250" aria-hidden="true" tabindex="-1"></a><span class="co"># Class weights (used later for weighted learning)</span></span>
<span id="cb28-251"><a href="#cb28-251" aria-hidden="true" tabindex="-1"></a>n_total <span class="ot">&lt;-</span> <span class="fu">nrow</span>(hr_data)</span>
<span id="cb28-252"><a href="#cb28-252" aria-hidden="true" tabindex="-1"></a>n_pos <span class="ot">&lt;-</span> <span class="fu">sum</span>(hr_data<span class="sc">$</span>Attrition_Binary)</span>
<span id="cb28-253"><a href="#cb28-253" aria-hidden="true" tabindex="-1"></a>n_neg <span class="ot">&lt;-</span> n_total <span class="sc">-</span> n_pos</span>
<span id="cb28-254"><a href="#cb28-254" aria-hidden="true" tabindex="-1"></a>weight_pos <span class="ot">&lt;-</span> n_total <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> n_pos)</span>
<span id="cb28-255"><a href="#cb28-255" aria-hidden="true" tabindex="-1"></a>weight_neg <span class="ot">&lt;-</span> n_total <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> n_neg)</span>
<span id="cb28-256"><a href="#cb28-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-257"><a href="#cb28-257" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Class Weights for Imbalanced Learning:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-258"><a href="#cb28-258" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- Weight for Class 0 (No Attrition):"</span>, <span class="fu">round</span>(weight_neg, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-259"><a href="#cb28-259" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- Weight for Class 1 (Attrition):"</span>, <span class="fu">round</span>(weight_pos, <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-260"><a href="#cb28-260" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-261"><a href="#cb28-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-262"><a href="#cb28-262" aria-hidden="true" tabindex="-1"></a>The dataset exhibits a significant class imbalance in employee attrition, with 83.9% of employees (1,233) having "No" as their attrition value and only 16.1% (237) having "Yes." This imbalance can challenge predictive modeling, as algorithms may be biased toward the majority class. To mitigate this, class weights were calculated inversely proportional to class frequencies, assigning a weight of 0.5961 to the majority class (No attrition) and 3.1013 to the minority class (Yes attrition). These weights can be applied during model training to give greater importance to underrepresented cases, improving the model’s ability to correctly identify employees at risk of leaving.</span>
<span id="cb28-263"><a href="#cb28-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-264"><a href="#cb28-264" aria-hidden="true" tabindex="-1"></a><span class="fu">## Attrition by Key Categorical Variables</span></span>
<span id="cb28-265"><a href="#cb28-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-266"><a href="#cb28-266" aria-hidden="true" tabindex="-1"></a><span class="in">```{r categorical-eda}</span></span>
<span id="cb28-267"><a href="#cb28-267" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: categorical-eda</span></span>
<span id="cb28-268"><a href="#cb28-268" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 2: Attrition Rates by Key Categorical Variables"</span></span>
<span id="cb28-269"><a href="#cb28-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-270"><a href="#cb28-270" aria-hidden="true" tabindex="-1"></a>overtime_summary <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span></span>
<span id="cb28-271"><a href="#cb28-271" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(OverTime) <span class="sc">%&gt;%</span></span>
<span id="cb28-272"><a href="#cb28-272" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-273"><a href="#cb28-273" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total =</span> <span class="fu">n</span>(),</span>
<span id="cb28-274"><a href="#cb28-274" aria-hidden="true" tabindex="-1"></a>    <span class="at">Attrition =</span> <span class="fu">sum</span>(Attrition_Binary),</span>
<span id="cb28-275"><a href="#cb28-275" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rate =</span> <span class="fu">mean</span>(Attrition_Binary) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb28-276"><a href="#cb28-276" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb28-277"><a href="#cb28-277" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-278"><a href="#cb28-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-279"><a href="#cb28-279" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(overtime_summary, <span class="fu">aes</span>(<span class="at">x =</span> OverTime, <span class="at">y =</span> Rate, <span class="at">fill =</span> OverTime)) <span class="sc">+</span></span>
<span id="cb28-280"><a href="#cb28-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb28-281"><a href="#cb28-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(Rate, <span class="dv">1</span>), <span class="st">"%"</span>)), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb28-282"><a href="#cb28-282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"OverTime"</span>, <span class="at">y =</span> <span class="st">"Attrition Rate (%)"</span>, <span class="at">title =</span> <span class="st">"By OverTime Status"</span>) <span class="sc">+</span></span>
<span id="cb28-283"><a href="#cb28-283" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-284"><a href="#cb28-284" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb28-285"><a href="#cb28-285" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fu">max</span>(overtime_summary<span class="sc">$</span>Rate) <span class="sc">*</span> <span class="fl">1.25</span>)</span>
<span id="cb28-286"><a href="#cb28-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-287"><a href="#cb28-287" aria-hidden="true" tabindex="-1"></a>dept_summary <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span></span>
<span id="cb28-288"><a href="#cb28-288" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Department) <span class="sc">%&gt;%</span></span>
<span id="cb28-289"><a href="#cb28-289" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-290"><a href="#cb28-290" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total =</span> <span class="fu">n</span>(),</span>
<span id="cb28-291"><a href="#cb28-291" aria-hidden="true" tabindex="-1"></a>    <span class="at">Attrition =</span> <span class="fu">sum</span>(Attrition_Binary),</span>
<span id="cb28-292"><a href="#cb28-292" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rate =</span> <span class="fu">mean</span>(Attrition_Binary) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb28-293"><a href="#cb28-293" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb28-294"><a href="#cb28-294" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-295"><a href="#cb28-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-296"><a href="#cb28-296" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dept_summary, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Department, <span class="sc">-</span>Rate), <span class="at">y =</span> Rate, <span class="at">fill =</span> Department)) <span class="sc">+</span></span>
<span id="cb28-297"><a href="#cb28-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb28-298"><a href="#cb28-298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(Rate, <span class="dv">1</span>), <span class="st">"%"</span>)), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb28-299"><a href="#cb28-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Department"</span>, <span class="at">y =</span> <span class="st">"Attrition Rate (%)"</span>, <span class="at">title =</span> <span class="st">"By Department"</span>) <span class="sc">+</span></span>
<span id="cb28-300"><a href="#cb28-300" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-301"><a href="#cb28-301" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb28-302"><a href="#cb28-302" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fu">max</span>(dept_summary<span class="sc">$</span>Rate) <span class="sc">*</span> <span class="fl">1.25</span>)</span>
<span id="cb28-303"><a href="#cb28-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-304"><a href="#cb28-304" aria-hidden="true" tabindex="-1"></a>marital_summary <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span></span>
<span id="cb28-305"><a href="#cb28-305" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(MaritalStatus) <span class="sc">%&gt;%</span></span>
<span id="cb28-306"><a href="#cb28-306" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-307"><a href="#cb28-307" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total =</span> <span class="fu">n</span>(),</span>
<span id="cb28-308"><a href="#cb28-308" aria-hidden="true" tabindex="-1"></a>    <span class="at">Attrition =</span> <span class="fu">sum</span>(Attrition_Binary),</span>
<span id="cb28-309"><a href="#cb28-309" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rate =</span> <span class="fu">mean</span>(Attrition_Binary) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb28-310"><a href="#cb28-310" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb28-311"><a href="#cb28-311" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-312"><a href="#cb28-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-313"><a href="#cb28-313" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(marital_summary, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(MaritalStatus, <span class="sc">-</span>Rate), <span class="at">y =</span> Rate, <span class="at">fill =</span> MaritalStatus)) <span class="sc">+</span></span>
<span id="cb28-314"><a href="#cb28-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb28-315"><a href="#cb28-315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(Rate, <span class="dv">1</span>), <span class="st">"%"</span>)), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb28-316"><a href="#cb28-316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Marital Status"</span>, <span class="at">y =</span> <span class="st">"Attrition Rate (%)"</span>, <span class="at">title =</span> <span class="st">"By Marital Status"</span>) <span class="sc">+</span></span>
<span id="cb28-317"><a href="#cb28-317" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-318"><a href="#cb28-318" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb28-319"><a href="#cb28-319" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fu">max</span>(marital_summary<span class="sc">$</span>Rate) <span class="sc">*</span> <span class="fl">1.25</span>)</span>
<span id="cb28-320"><a href="#cb28-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-321"><a href="#cb28-321" aria-hidden="true" tabindex="-1"></a>travel_summary <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span></span>
<span id="cb28-322"><a href="#cb28-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(BusinessTravel) <span class="sc">%&gt;%</span></span>
<span id="cb28-323"><a href="#cb28-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-324"><a href="#cb28-324" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total =</span> <span class="fu">n</span>(),</span>
<span id="cb28-325"><a href="#cb28-325" aria-hidden="true" tabindex="-1"></a>    <span class="at">Attrition =</span> <span class="fu">sum</span>(Attrition_Binary),</span>
<span id="cb28-326"><a href="#cb28-326" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rate =</span> <span class="fu">mean</span>(Attrition_Binary) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb28-327"><a href="#cb28-327" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb28-328"><a href="#cb28-328" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-329"><a href="#cb28-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-330"><a href="#cb28-330" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(travel_summary, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(BusinessTravel, <span class="sc">-</span>Rate), <span class="at">y =</span> Rate, <span class="at">fill =</span> BusinessTravel)) <span class="sc">+</span></span>
<span id="cb28-331"><a href="#cb28-331" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb28-332"><a href="#cb28-332" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(Rate, <span class="dv">1</span>), <span class="st">"%"</span>)), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb28-333"><a href="#cb28-333" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Business Travel"</span>, <span class="at">y =</span> <span class="st">"Attrition Rate (%)"</span>, <span class="at">title =</span> <span class="st">"By Business Travel"</span>) <span class="sc">+</span></span>
<span id="cb28-334"><a href="#cb28-334" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-335"><a href="#cb28-335" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb28-336"><a href="#cb28-336" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">15</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb28-337"><a href="#cb28-337" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fu">max</span>(travel_summary<span class="sc">$</span>Rate) <span class="sc">*</span> <span class="fl">1.25</span>)</span>
<span id="cb28-338"><a href="#cb28-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-339"><a href="#cb28-339" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(p1, p2, p3, p4, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb28-340"><a href="#cb28-340" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-341"><a href="#cb28-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-342"><a href="#cb28-342" aria-hidden="true" tabindex="-1"></a>The graphical analysis suggests that employee attrition varies substantially across several workplace and demographic factors. Employees who work overtime show a markedly higher attrition rate (30.5%) compared to those who do not work overtime (10.4%), indicating overtime may be a strong contributor to turnover. Attrition also differs by department, with Sales experiencing the highest rate (20.6%), followed by HR (19%), while Research &amp; Development has the lowest attrition (13.8%). Marital status appears to be associated with attrition as well, as single employees have a notably higher turnover rate (25.5%) than married (12.5%) or divorced employees (10.1%). Finally, business travel frequency shows a clear pattern: employees who travel frequently have the highest attrition rate (24.9%), followed by those who travel rarely (15%), while non-traveling employees have the lowest attrition (8%). Overall, these graphs indicate that workload demands, job role characteristics, and personal circumstances may play important roles in employee turnover.</span>
<span id="cb28-343"><a href="#cb28-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-344"><a href="#cb28-344" aria-hidden="true" tabindex="-1"></a><span class="fu">## Chi-Square Tests for Categorical Associations</span></span>
<span id="cb28-345"><a href="#cb28-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-346"><a href="#cb28-346" aria-hidden="true" tabindex="-1"></a><span class="in">```{r chi-square-tests}</span></span>
<span id="cb28-347"><a href="#cb28-347" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: chi-square-tests</span></span>
<span id="cb28-348"><a href="#cb28-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-349"><a href="#cb28-349" aria-hidden="true" tabindex="-1"></a>chi_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"OverTime"</span>, <span class="st">"Department"</span>, <span class="st">"JobRole"</span>, <span class="st">"MaritalStatus"</span>, <span class="st">"BusinessTravel"</span>, <span class="st">"Gender"</span>)</span>
<span id="cb28-350"><a href="#cb28-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-351"><a href="#cb28-351" aria-hidden="true" tabindex="-1"></a>chi_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-352"><a href="#cb28-352" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">character</span>(),</span>
<span id="cb28-353"><a href="#cb28-353" aria-hidden="true" tabindex="-1"></a>  <span class="at">Chi_Square =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-354"><a href="#cb28-354" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="fu">integer</span>(),</span>
<span id="cb28-355"><a href="#cb28-355" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_value =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-356"><a href="#cb28-356" aria-hidden="true" tabindex="-1"></a>  <span class="at">Cramers_V =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-357"><a href="#cb28-357" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb28-358"><a href="#cb28-358" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-359"><a href="#cb28-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-360"><a href="#cb28-360" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (var <span class="cf">in</span> chi_vars) {</span>
<span id="cb28-361"><a href="#cb28-361" aria-hidden="true" tabindex="-1"></a>  tbl <span class="ot">&lt;-</span> <span class="fu">table</span>(hr_data[[var]], hr_data<span class="sc">$</span>Attrition)</span>
<span id="cb28-362"><a href="#cb28-362" aria-hidden="true" tabindex="-1"></a>  chi_test <span class="ot">&lt;-</span> <span class="fu">suppressWarnings</span>(<span class="fu">chisq.test</span>(tbl))</span>
<span id="cb28-363"><a href="#cb28-363" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(hr_data)</span>
<span id="cb28-364"><a href="#cb28-364" aria-hidden="true" tabindex="-1"></a>  cramers_v <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">as.numeric</span>(chi_test<span class="sc">$</span>statistic) <span class="sc">/</span> (n <span class="sc">*</span> (<span class="fu">min</span>(<span class="fu">dim</span>(tbl)) <span class="sc">-</span> <span class="dv">1</span>)))</span>
<span id="cb28-365"><a href="#cb28-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-366"><a href="#cb28-366" aria-hidden="true" tabindex="-1"></a>  chi_results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(chi_results, <span class="fu">data.frame</span>(</span>
<span id="cb28-367"><a href="#cb28-367" aria-hidden="true" tabindex="-1"></a>    <span class="at">Variable =</span> var,</span>
<span id="cb28-368"><a href="#cb28-368" aria-hidden="true" tabindex="-1"></a>    <span class="at">Chi_Square =</span> <span class="fu">round</span>(<span class="fu">as.numeric</span>(chi_test<span class="sc">$</span>statistic), <span class="dv">2</span>),</span>
<span id="cb28-369"><a href="#cb28-369" aria-hidden="true" tabindex="-1"></a>    <span class="at">df =</span> <span class="fu">as.integer</span>(chi_test<span class="sc">$</span>parameter),</span>
<span id="cb28-370"><a href="#cb28-370" aria-hidden="true" tabindex="-1"></a>    <span class="at">p_value =</span> chi_test<span class="sc">$</span>p.value,</span>
<span id="cb28-371"><a href="#cb28-371" aria-hidden="true" tabindex="-1"></a>    <span class="at">Cramers_V =</span> <span class="fu">round</span>(cramers_v, <span class="dv">4</span>)</span>
<span id="cb28-372"><a href="#cb28-372" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb28-373"><a href="#cb28-373" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-374"><a href="#cb28-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-375"><a href="#cb28-375" aria-hidden="true" tabindex="-1"></a>chi_results<span class="sc">$</span>Significance <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(chi_results<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.001</span>, <span class="st">"***"</span>,</span>
<span id="cb28-376"><a href="#cb28-376" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">ifelse</span>(chi_results<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.01</span>, <span class="st">"**"</span>,</span>
<span id="cb28-377"><a href="#cb28-377" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">ifelse</span>(chi_results<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.05</span>, <span class="st">"*"</span>, <span class="st">""</span>)))</span>
<span id="cb28-378"><a href="#cb28-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-379"><a href="#cb28-379" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(chi_results,</span>
<span id="cb28-380"><a href="#cb28-380" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Table 2: Chi-Square Tests for Categorical Variables"</span>,</span>
<span id="cb28-381"><a href="#cb28-381" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Variable"</span>, <span class="st">"χ²"</span>, <span class="st">"df"</span>, <span class="st">"p-value"</span>, <span class="st">"Cramer's V"</span>, <span class="st">"Sig."</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-382"><a href="#cb28-382" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-383"><a href="#cb28-383" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-384"><a href="#cb28-384" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-385"><a href="#cb28-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-386"><a href="#cb28-386" aria-hidden="true" tabindex="-1"></a>OverTime and JobRole show the strongest relationships with attrition, both highly significant (p &lt; 0.001) and exhibiting moderate effect sizes, suggesting that employees’ overtime status and job roles are meaningfully related to the likelihood of leaving the company. MaritalStatus and BusinessTravel are also highly significant, though with smaller effect sizes, indicating weaker but still relevant associations with attrition. Department shows a statistically significant relationship with attrition as well, but the small effect size suggests a limited practical impact. In contrast, Gender is not significantly associated with attrition, and its negligible effect size indicates that it is unlikely to influence whether an employee leaves the organization.</span>
<span id="cb28-387"><a href="#cb28-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-388"><a href="#cb28-388" aria-hidden="true" tabindex="-1"></a><span class="fu">## Numeric Variables Comparison</span></span>
<span id="cb28-389"><a href="#cb28-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-390"><a href="#cb28-390" aria-hidden="true" tabindex="-1"></a><span class="in">```{r numeric-comparison}</span></span>
<span id="cb28-391"><a href="#cb28-391" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: numeric-comparison</span></span>
<span id="cb28-392"><a href="#cb28-392" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 3: Distribution of Key Numeric Variables by Attrition Status"</span></span>
<span id="cb28-393"><a href="#cb28-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-394"><a href="#cb28-394" aria-hidden="true" tabindex="-1"></a>numeric_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Age"</span>, <span class="st">"MonthlyIncome"</span>, <span class="st">"YearsAtCompany"</span>, <span class="st">"DistanceFromHome"</span>)</span>
<span id="cb28-395"><a href="#cb28-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-396"><a href="#cb28-396" aria-hidden="true" tabindex="-1"></a>plots <span class="ot">&lt;-</span> <span class="fu">lapply</span>(numeric_vars, <span class="cf">function</span>(var) {</span>
<span id="cb28-397"><a href="#cb28-397" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(hr_data, <span class="fu">aes</span>(<span class="at">x =</span> Attrition, <span class="at">y =</span> .data[[var]], <span class="at">fill =</span> Attrition)) <span class="sc">+</span></span>
<span id="cb28-398"><a href="#cb28-398" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb28-399"><a href="#cb28-399" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Attrition"</span>, <span class="at">y =</span> var, <span class="at">title =</span> var) <span class="sc">+</span></span>
<span id="cb28-400"><a href="#cb28-400" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-401"><a href="#cb28-401" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb28-402"><a href="#cb28-402" aria-hidden="true" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb28-403"><a href="#cb28-403" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb28-404"><a href="#cb28-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-405"><a href="#cb28-405" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(<span class="at">grobs =</span> plots, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb28-406"><a href="#cb28-406" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-407"><a href="#cb28-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-408"><a href="#cb28-408" aria-hidden="true" tabindex="-1"></a>When examining key numerical values in our analysis, we observe noticeable differences in attrition rates across employee categories. Attrition was more common among younger employees, those with lower monthly incomes, and employees with fewer years at the company. Additionally, employees who worked farther from home exhibited higher rates of attrition.</span>
<span id="cb28-409"><a href="#cb28-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-410"><a href="#cb28-410" aria-hidden="true" tabindex="-1"></a><span class="in">```{r t-tests}</span></span>
<span id="cb28-411"><a href="#cb28-411" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: t-tests</span></span>
<span id="cb28-412"><a href="#cb28-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-413"><a href="#cb28-413" aria-hidden="true" tabindex="-1"></a>t_test_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb28-414"><a href="#cb28-414" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Age"</span>, <span class="st">"MonthlyIncome"</span>, <span class="st">"DistanceFromHome"</span>, <span class="st">"YearsAtCompany"</span>,</span>
<span id="cb28-415"><a href="#cb28-415" aria-hidden="true" tabindex="-1"></a>  <span class="st">"YearsInCurrentRole"</span>, <span class="st">"YearsSinceLastPromotion"</span>, <span class="st">"TotalWorkingYears"</span>,</span>
<span id="cb28-416"><a href="#cb28-416" aria-hidden="true" tabindex="-1"></a>  <span class="st">"JobSatisfaction"</span>, <span class="st">"EnvironmentSatisfaction"</span>, <span class="st">"WorkLifeBalance"</span></span>
<span id="cb28-417"><a href="#cb28-417" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-418"><a href="#cb28-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-419"><a href="#cb28-419" aria-hidden="true" tabindex="-1"></a>t_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-420"><a href="#cb28-420" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">character</span>(),</span>
<span id="cb28-421"><a href="#cb28-421" aria-hidden="true" tabindex="-1"></a>  <span class="at">Mean_No =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-422"><a href="#cb28-422" aria-hidden="true" tabindex="-1"></a>  <span class="at">Mean_Yes =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-423"><a href="#cb28-423" aria-hidden="true" tabindex="-1"></a>  <span class="at">Difference =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-424"><a href="#cb28-424" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_value =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-425"><a href="#cb28-425" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb28-426"><a href="#cb28-426" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-427"><a href="#cb28-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-428"><a href="#cb28-428" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (var <span class="cf">in</span> t_test_vars) {</span>
<span id="cb28-429"><a href="#cb28-429" aria-hidden="true" tabindex="-1"></a>  t_test <span class="ot">&lt;-</span> <span class="fu">t.test</span>(hr_data[[var]] <span class="sc">~</span> hr_data<span class="sc">$</span>Attrition)</span>
<span id="cb28-430"><a href="#cb28-430" aria-hidden="true" tabindex="-1"></a>  t_results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(t_results, <span class="fu">data.frame</span>(</span>
<span id="cb28-431"><a href="#cb28-431" aria-hidden="true" tabindex="-1"></a>    <span class="at">Variable =</span> var,</span>
<span id="cb28-432"><a href="#cb28-432" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean_No =</span> <span class="fu">round</span>(t_test<span class="sc">$</span>estimate[<span class="dv">1</span>], <span class="dv">2</span>),</span>
<span id="cb28-433"><a href="#cb28-433" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean_Yes =</span> <span class="fu">round</span>(t_test<span class="sc">$</span>estimate[<span class="dv">2</span>], <span class="dv">2</span>),</span>
<span id="cb28-434"><a href="#cb28-434" aria-hidden="true" tabindex="-1"></a>    <span class="at">Difference =</span> <span class="fu">round</span>(t_test<span class="sc">$</span>estimate[<span class="dv">2</span>] <span class="sc">-</span> t_test<span class="sc">$</span>estimate[<span class="dv">1</span>], <span class="dv">2</span>),</span>
<span id="cb28-435"><a href="#cb28-435" aria-hidden="true" tabindex="-1"></a>    <span class="at">p_value =</span> t_test<span class="sc">$</span>p.value</span>
<span id="cb28-436"><a href="#cb28-436" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb28-437"><a href="#cb28-437" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-438"><a href="#cb28-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-439"><a href="#cb28-439" aria-hidden="true" tabindex="-1"></a>t_results<span class="sc">$</span>Significance <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(t_results<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.001</span>, <span class="st">"***"</span>,</span>
<span id="cb28-440"><a href="#cb28-440" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">ifelse</span>(t_results<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.01</span>, <span class="st">"**"</span>,</span>
<span id="cb28-441"><a href="#cb28-441" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">ifelse</span>(t_results<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.05</span>, <span class="st">"*"</span>, <span class="st">""</span>)))</span>
<span id="cb28-442"><a href="#cb28-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-443"><a href="#cb28-443" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(t_results,</span>
<span id="cb28-444"><a href="#cb28-444" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Table 3: T-Tests Comparing Numeric Variables by Attrition Status"</span>,</span>
<span id="cb28-445"><a href="#cb28-445" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Variable"</span>, <span class="st">"Mean (No)"</span>, <span class="st">"Mean (Yes)"</span>, <span class="st">"Difference"</span>, <span class="st">"p-value"</span>, <span class="st">"Sig."</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-446"><a href="#cb28-446" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-447"><a href="#cb28-447" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-448"><a href="#cb28-448" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-449"><a href="#cb28-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-450"><a href="#cb28-450" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb28-451"><a href="#cb28-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-452"><a href="#cb28-452" aria-hidden="true" tabindex="-1"></a><span class="fu"># Research Question 1</span></span>
<span id="cb28-453"><a href="#cb28-453" aria-hidden="true" tabindex="-1"></a><span class="fu">## Work-Life Imbalance &amp; Attrition Risk Profiling {.unnumbered}</span></span>
<span id="cb28-454"><a href="#cb28-454" aria-hidden="true" tabindex="-1"></a>**How do work-life factors (OverTime, DistanceFromHome, WorkLifeBalance, YearsAtCompany) interact to predict employee attrition, and can we identify distinct "high-risk" employee profiles using these variables?**</span>
<span id="cb28-455"><a href="#cb28-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-456"><a href="#cb28-456" aria-hidden="true" tabindex="-1"></a><span class="fu">## Decision Tree Model</span></span>
<span id="cb28-457"><a href="#cb28-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-458"><a href="#cb28-458" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q1-decision-tree}</span></span>
<span id="cb28-459"><a href="#cb28-459" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q1-decision-tree</span></span>
<span id="cb28-460"><a href="#cb28-460" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 4: Decision Tree for Work-Life Attrition Risk Profiling"</span></span>
<span id="cb28-461"><a href="#cb28-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-462"><a href="#cb28-462" aria-hidden="true" tabindex="-1"></a>q1_data <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span></span>
<span id="cb28-463"><a href="#cb28-463" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Attrition_Binary, OverTime_Binary, DistanceFromHome, WorkLifeBalance, YearsAtCompany)</span>
<span id="cb28-464"><a href="#cb28-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-465"><a href="#cb28-465" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">515</span>)</span>
<span id="cb28-466"><a href="#cb28-466" aria-hidden="true" tabindex="-1"></a>train_idx <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(q1_data<span class="sc">$</span>Attrition_Binary, <span class="at">p =</span> <span class="fl">0.7</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb28-467"><a href="#cb28-467" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> q1_data[train_idx, ]</span>
<span id="cb28-468"><a href="#cb28-468" aria-hidden="true" tabindex="-1"></a>test_data  <span class="ot">&lt;-</span> q1_data[<span class="sc">-</span>train_idx, ]</span>
<span id="cb28-469"><a href="#cb28-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-470"><a href="#cb28-470" aria-hidden="true" tabindex="-1"></a>dt_model <span class="ot">&lt;-</span> <span class="fu">rpart</span>(</span>
<span id="cb28-471"><a href="#cb28-471" aria-hidden="true" tabindex="-1"></a>  Attrition_Binary <span class="sc">~</span> OverTime_Binary <span class="sc">+</span> DistanceFromHome <span class="sc">+</span> WorkLifeBalance <span class="sc">+</span> YearsAtCompany,</span>
<span id="cb28-472"><a href="#cb28-472" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> train_data,</span>
<span id="cb28-473"><a href="#cb28-473" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">"class"</span>,</span>
<span id="cb28-474"><a href="#cb28-474" aria-hidden="true" tabindex="-1"></a>  <span class="at">parms =</span> <span class="fu">list</span>(<span class="at">prior =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>)),</span>
<span id="cb28-475"><a href="#cb28-475" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">rpart.control</span>(<span class="at">maxdepth =</span> <span class="dv">4</span>, <span class="at">minsplit =</span> <span class="dv">50</span>, <span class="at">cp =</span> <span class="fl">0.01</span>)</span>
<span id="cb28-476"><a href="#cb28-476" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-477"><a href="#cb28-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-478"><a href="#cb28-478" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(dt_model,</span>
<span id="cb28-479"><a href="#cb28-479" aria-hidden="true" tabindex="-1"></a>           <span class="at">type =</span> <span class="dv">4</span>,</span>
<span id="cb28-480"><a href="#cb28-480" aria-hidden="true" tabindex="-1"></a>           <span class="at">extra =</span> <span class="dv">104</span>,</span>
<span id="cb28-481"><a href="#cb28-481" aria-hidden="true" tabindex="-1"></a>           <span class="at">fallen.leaves =</span> <span class="cn">TRUE</span>,</span>
<span id="cb28-482"><a href="#cb28-482" aria-hidden="true" tabindex="-1"></a>           <span class="at">main =</span> <span class="st">"Decision Tree: Work-Life Factors Predicting Attrition"</span>)</span>
<span id="cb28-483"><a href="#cb28-483" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-484"><a href="#cb28-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-485"><a href="#cb28-485" aria-hidden="true" tabindex="-1"></a><span class="in">```{r dt-importance}</span></span>
<span id="cb28-486"><a href="#cb28-486" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: dt-importance</span></span>
<span id="cb28-487"><a href="#cb28-487" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 5: Decision Tree Feature Importance"</span></span>
<span id="cb28-488"><a href="#cb28-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-489"><a href="#cb28-489" aria-hidden="true" tabindex="-1"></a>dt_importance <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-490"><a href="#cb28-490" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">names</span>(dt_model<span class="sc">$</span>variable.importance),</span>
<span id="cb28-491"><a href="#cb28-491" aria-hidden="true" tabindex="-1"></a>  <span class="at">Importance =</span> dt_model<span class="sc">$</span>variable.importance <span class="sc">/</span> <span class="fu">sum</span>(dt_model<span class="sc">$</span>variable.importance)</span>
<span id="cb28-492"><a href="#cb28-492" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-493"><a href="#cb28-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-494"><a href="#cb28-494" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt_importance, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Variable, Importance), <span class="at">y =</span> Importance, <span class="at">fill =</span> Importance)) <span class="sc">+</span></span>
<span id="cb28-495"><a href="#cb28-495" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb28-496"><a href="#cb28-496" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb28-497"><a href="#cb28-497" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Variable"</span>, <span class="at">y =</span> <span class="st">"Relative Importance"</span>,</span>
<span id="cb28-498"><a href="#cb28-498" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Decision Tree Feature Importance"</span>,</span>
<span id="cb28-499"><a href="#cb28-499" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Work-Life Factors"</span>) <span class="sc">+</span></span>
<span id="cb28-500"><a href="#cb28-500" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-501"><a href="#cb28-501" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb28-502"><a href="#cb28-502" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb28-503"><a href="#cb28-503" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-504"><a href="#cb28-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-505"><a href="#cb28-505" aria-hidden="true" tabindex="-1"></a><span class="in">```{r dt-performance}</span></span>
<span id="cb28-506"><a href="#cb28-506" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: dt-performance</span></span>
<span id="cb28-507"><a href="#cb28-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-508"><a href="#cb28-508" aria-hidden="true" tabindex="-1"></a>pred_dt <span class="ot">&lt;-</span> <span class="fu">predict</span>(dt_model, test_data, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb28-509"><a href="#cb28-509" aria-hidden="true" tabindex="-1"></a>pred_prob_dt <span class="ot">&lt;-</span> <span class="fu">predict</span>(dt_model, test_data, <span class="at">type =</span> <span class="st">"prob"</span>)[, <span class="dv">2</span>]</span>
<span id="cb28-510"><a href="#cb28-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-511"><a href="#cb28-511" aria-hidden="true" tabindex="-1"></a>cm_dt <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(<span class="fu">factor</span>(pred_dt), <span class="fu">factor</span>(test_data<span class="sc">$</span>Attrition_Binary))</span>
<span id="cb28-512"><a href="#cb28-512" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cm_dt)</span>
<span id="cb28-513"><a href="#cb28-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-514"><a href="#cb28-514" aria-hidden="true" tabindex="-1"></a>roc_dt <span class="ot">&lt;-</span> <span class="fu">roc</span>(test_data<span class="sc">$</span>Attrition_Binary, pred_prob_dt)</span>
<span id="cb28-515"><a href="#cb28-515" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Decision Tree AUC-ROC:"</span>, <span class="fu">round</span>(<span class="fu">auc</span>(roc_dt), <span class="dv">4</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-516"><a href="#cb28-516" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-517"><a href="#cb28-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-518"><a href="#cb28-518" aria-hidden="true" tabindex="-1"></a><span class="fu">## Logistic Regression with Interaction Terms</span></span>
<span id="cb28-519"><a href="#cb28-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-520"><a href="#cb28-520" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q1-logistic}</span></span>
<span id="cb28-521"><a href="#cb28-521" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q1-logistic</span></span>
<span id="cb28-522"><a href="#cb28-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-523"><a href="#cb28-523" aria-hidden="true" tabindex="-1"></a>hr_q1 <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span></span>
<span id="cb28-524"><a href="#cb28-524" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-525"><a href="#cb28-525" aria-hidden="true" tabindex="-1"></a>    <span class="at">OT_x_WLB          =</span> OverTime_Binary <span class="sc">*</span> WorkLifeBalance,</span>
<span id="cb28-526"><a href="#cb28-526" aria-hidden="true" tabindex="-1"></a>    <span class="at">OT_x_Distance     =</span> OverTime_Binary <span class="sc">*</span> DistanceFromHome,</span>
<span id="cb28-527"><a href="#cb28-527" aria-hidden="true" tabindex="-1"></a>    <span class="at">OT_x_YearsAtCompany =</span> OverTime_Binary <span class="sc">*</span> YearsAtCompany</span>
<span id="cb28-528"><a href="#cb28-528" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-529"><a href="#cb28-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-530"><a href="#cb28-530" aria-hidden="true" tabindex="-1"></a>logit_q1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb28-531"><a href="#cb28-531" aria-hidden="true" tabindex="-1"></a>  Attrition_Binary <span class="sc">~</span> OverTime_Binary <span class="sc">+</span> DistanceFromHome <span class="sc">+</span> WorkLifeBalance <span class="sc">+</span></span>
<span id="cb28-532"><a href="#cb28-532" aria-hidden="true" tabindex="-1"></a>    YearsAtCompany <span class="sc">+</span> OT_x_WLB <span class="sc">+</span> OT_x_Distance <span class="sc">+</span> OT_x_YearsAtCompany,</span>
<span id="cb28-533"><a href="#cb28-533" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> hr_q1,</span>
<span id="cb28-534"><a href="#cb28-534" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>)</span>
<span id="cb28-535"><a href="#cb28-535" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-536"><a href="#cb28-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-537"><a href="#cb28-537" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(logit_q1)</span>
<span id="cb28-538"><a href="#cb28-538" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-539"><a href="#cb28-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-540"><a href="#cb28-540" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q1-odds-ratios}</span></span>
<span id="cb28-541"><a href="#cb28-541" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q1-odds-ratios</span></span>
<span id="cb28-542"><a href="#cb28-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-543"><a href="#cb28-543" aria-hidden="true" tabindex="-1"></a>or_ci <span class="ot">&lt;-</span> <span class="fu">suppressMessages</span>(<span class="fu">confint</span>(logit_q1))</span>
<span id="cb28-544"><a href="#cb28-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-545"><a href="#cb28-545" aria-hidden="true" tabindex="-1"></a>or_table <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-546"><a href="#cb28-546" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">names</span>(<span class="fu">coef</span>(logit_q1)),</span>
<span id="cb28-547"><a href="#cb28-547" aria-hidden="true" tabindex="-1"></a>  <span class="at">Coefficient =</span> <span class="fu">coef</span>(logit_q1),</span>
<span id="cb28-548"><a href="#cb28-548" aria-hidden="true" tabindex="-1"></a>  <span class="at">OR =</span> <span class="fu">exp</span>(<span class="fu">coef</span>(logit_q1)),</span>
<span id="cb28-549"><a href="#cb28-549" aria-hidden="true" tabindex="-1"></a>  <span class="at">CI_Lower =</span> <span class="fu">exp</span>(or_ci[, <span class="dv">1</span>]),</span>
<span id="cb28-550"><a href="#cb28-550" aria-hidden="true" tabindex="-1"></a>  <span class="at">CI_Upper =</span> <span class="fu">exp</span>(or_ci[, <span class="dv">2</span>]),</span>
<span id="cb28-551"><a href="#cb28-551" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_value =</span> <span class="fu">summary</span>(logit_q1)<span class="sc">$</span>coefficients[, <span class="dv">4</span>]</span>
<span id="cb28-552"><a href="#cb28-552" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-553"><a href="#cb28-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-554"><a href="#cb28-554" aria-hidden="true" tabindex="-1"></a>or_table<span class="sc">$</span>Significance <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(or_table<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.001</span>, <span class="st">"***"</span>,</span>
<span id="cb28-555"><a href="#cb28-555" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">ifelse</span>(or_table<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.01</span>, <span class="st">"**"</span>,</span>
<span id="cb28-556"><a href="#cb28-556" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">ifelse</span>(or_table<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.05</span>, <span class="st">"*"</span>, <span class="st">""</span>)))</span>
<span id="cb28-557"><a href="#cb28-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-558"><a href="#cb28-558" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(or_table[<span class="sc">-</span><span class="dv">1</span>, ],</span>
<span id="cb28-559"><a href="#cb28-559" aria-hidden="true" tabindex="-1"></a>      <span class="at">digits =</span> <span class="dv">4</span>,</span>
<span id="cb28-560"><a href="#cb28-560" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Table 4: Logistic Regression Odds Ratios (Q1)"</span>,</span>
<span id="cb28-561"><a href="#cb28-561" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Variable"</span>, <span class="st">"β"</span>, <span class="st">"OR"</span>, <span class="st">"95% CI Lower"</span>, <span class="st">"95% CI Upper"</span>, <span class="st">"p-value"</span>, <span class="st">"Sig."</span>),</span>
<span id="cb28-562"><a href="#cb28-562" aria-hidden="true" tabindex="-1"></a>      <span class="at">row.names =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-563"><a href="#cb28-563" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-564"><a href="#cb28-564" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-565"><a href="#cb28-565" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-566"><a href="#cb28-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-567"><a href="#cb28-567" aria-hidden="true" tabindex="-1"></a><span class="fu">## Random Forest Model</span></span>
<span id="cb28-568"><a href="#cb28-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-569"><a href="#cb28-569" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q1-random-forest}</span></span>
<span id="cb28-570"><a href="#cb28-570" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q1-random-forest</span></span>
<span id="cb28-571"><a href="#cb28-571" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 6: Random Forest Variable Importance"</span></span>
<span id="cb28-572"><a href="#cb28-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-573"><a href="#cb28-573" aria-hidden="true" tabindex="-1"></a>rf_model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(</span>
<span id="cb28-574"><a href="#cb28-574" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(Attrition_Binary) <span class="sc">~</span> OverTime_Binary <span class="sc">+</span> DistanceFromHome <span class="sc">+</span> WorkLifeBalance <span class="sc">+</span> YearsAtCompany,</span>
<span id="cb28-575"><a href="#cb28-575" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> train_data,</span>
<span id="cb28-576"><a href="#cb28-576" aria-hidden="true" tabindex="-1"></a>  <span class="at">ntree =</span> <span class="dv">500</span>,</span>
<span id="cb28-577"><a href="#cb28-577" aria-hidden="true" tabindex="-1"></a>  <span class="at">mtry =</span> <span class="dv">2</span>,</span>
<span id="cb28-578"><a href="#cb28-578" aria-hidden="true" tabindex="-1"></a>  <span class="at">classwt =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>),</span>
<span id="cb28-579"><a href="#cb28-579" aria-hidden="true" tabindex="-1"></a>  <span class="at">importance =</span> <span class="cn">TRUE</span></span>
<span id="cb28-580"><a href="#cb28-580" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-581"><a href="#cb28-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-582"><a href="#cb28-582" aria-hidden="true" tabindex="-1"></a>importance_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-583"><a href="#cb28-583" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">rownames</span>(<span class="fu">importance</span>(rf_model)),</span>
<span id="cb28-584"><a href="#cb28-584" aria-hidden="true" tabindex="-1"></a>  <span class="at">MeanDecreaseGini =</span> <span class="fu">importance</span>(rf_model)[, <span class="st">"MeanDecreaseGini"</span>]</span>
<span id="cb28-585"><a href="#cb28-585" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-586"><a href="#cb28-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-587"><a href="#cb28-587" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(importance_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Variable, MeanDecreaseGini), <span class="at">y =</span> MeanDecreaseGini, <span class="at">fill =</span> MeanDecreaseGini)) <span class="sc">+</span></span>
<span id="cb28-588"><a href="#cb28-588" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb28-589"><a href="#cb28-589" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb28-590"><a href="#cb28-590" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Variable"</span>, <span class="at">y =</span> <span class="st">"Mean Decrease in Gini"</span>,</span>
<span id="cb28-591"><a href="#cb28-591" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Random Forest Variable Importance"</span>,</span>
<span id="cb28-592"><a href="#cb28-592" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Work-Life Factors"</span>) <span class="sc">+</span></span>
<span id="cb28-593"><a href="#cb28-593" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-594"><a href="#cb28-594" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb28-595"><a href="#cb28-595" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb28-596"><a href="#cb28-596" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-597"><a href="#cb28-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-598"><a href="#cb28-598" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q1-roc-comparison}</span></span>
<span id="cb28-599"><a href="#cb28-599" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q1-roc-comparison</span></span>
<span id="cb28-600"><a href="#cb28-600" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 7: ROC Curves Comparison - Q1 Models"</span></span>
<span id="cb28-601"><a href="#cb28-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-602"><a href="#cb28-602" aria-hidden="true" tabindex="-1"></a>pred_prob_rf <span class="ot">&lt;-</span> <span class="fu">predict</span>(rf_model, test_data, <span class="at">type =</span> <span class="st">"prob"</span>)[, <span class="dv">2</span>]</span>
<span id="cb28-603"><a href="#cb28-603" aria-hidden="true" tabindex="-1"></a>roc_rf <span class="ot">&lt;-</span> <span class="fu">roc</span>(test_data<span class="sc">$</span>Attrition_Binary, pred_prob_rf)</span>
<span id="cb28-604"><a href="#cb28-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-605"><a href="#cb28-605" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(roc_dt, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">main =</span> <span class="st">"ROC Curves - Q1: Work-Life Models"</span>)</span>
<span id="cb28-606"><a href="#cb28-606" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(roc_rf, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-607"><a href="#cb28-607" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"bottomright"</span>,</span>
<span id="cb28-608"><a href="#cb28-608" aria-hidden="true" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">c</span>(<span class="fu">paste</span>(<span class="st">"Decision Tree (AUC ="</span>, <span class="fu">round</span>(<span class="fu">auc</span>(roc_dt), <span class="dv">3</span>), <span class="st">")"</span>),</span>
<span id="cb28-609"><a href="#cb28-609" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">paste</span>(<span class="st">"Random Forest (AUC ="</span>, <span class="fu">round</span>(<span class="fu">auc</span>(roc_rf), <span class="dv">3</span>), <span class="st">")"</span>)),</span>
<span id="cb28-610"><a href="#cb28-610" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb28-611"><a href="#cb28-611" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-612"><a href="#cb28-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-613"><a href="#cb28-613" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb28-614"><a href="#cb28-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-615"><a href="#cb28-615" aria-hidden="true" tabindex="-1"></a><span class="fu"># Research Question 2</span></span>
<span id="cb28-616"><a href="#cb28-616" aria-hidden="true" tabindex="-1"></a><span class="fu">## Career Stagnation &amp; Compensation Effects {.unnumbered}</span></span>
<span id="cb28-617"><a href="#cb28-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-618"><a href="#cb28-618" aria-hidden="true" tabindex="-1"></a>**At what thresholds do career stagnation indicators (YearsSinceLastPromotion, YearsInCurrentRole) combined with compensation factors (MonthlyIncome, PercentSalaryHike) become critical predictors of attrition?**</span>
<span id="cb28-619"><a href="#cb28-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-620"><a href="#cb28-620" aria-hidden="true" tabindex="-1"></a><span class="fu">## Train/Test Split + Weighted Logistic Regression</span></span>
<span id="cb28-621"><a href="#cb28-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-622"><a href="#cb28-622" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q2-weighted-logit}</span></span>
<span id="cb28-623"><a href="#cb28-623" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q2-weighted-logit</span></span>
<span id="cb28-624"><a href="#cb28-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-625"><a href="#cb28-625" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">515</span>)</span>
<span id="cb28-626"><a href="#cb28-626" aria-hidden="true" tabindex="-1"></a>train_idx2 <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(hr_data<span class="sc">$</span>Attrition_Binary, <span class="at">p =</span> <span class="fl">0.7</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb28-627"><a href="#cb28-627" aria-hidden="true" tabindex="-1"></a>train_q2 <span class="ot">&lt;-</span> hr_data[train_idx2, ]</span>
<span id="cb28-628"><a href="#cb28-628" aria-hidden="true" tabindex="-1"></a>test_q2  <span class="ot">&lt;-</span> hr_data[<span class="sc">-</span>train_idx2, ]</span>
<span id="cb28-629"><a href="#cb28-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-630"><a href="#cb28-630" aria-hidden="true" tabindex="-1"></a>n_total2 <span class="ot">&lt;-</span> <span class="fu">nrow</span>(train_q2)</span>
<span id="cb28-631"><a href="#cb28-631" aria-hidden="true" tabindex="-1"></a>n_pos2 <span class="ot">&lt;-</span> <span class="fu">sum</span>(train_q2<span class="sc">$</span>Attrition_Binary)</span>
<span id="cb28-632"><a href="#cb28-632" aria-hidden="true" tabindex="-1"></a>n_neg2 <span class="ot">&lt;-</span> n_total2 <span class="sc">-</span> n_pos2</span>
<span id="cb28-633"><a href="#cb28-633" aria-hidden="true" tabindex="-1"></a>w_pos2 <span class="ot">&lt;-</span> n_total2 <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> n_pos2)</span>
<span id="cb28-634"><a href="#cb28-634" aria-hidden="true" tabindex="-1"></a>w_neg2 <span class="ot">&lt;-</span> n_total2 <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> n_neg2)</span>
<span id="cb28-635"><a href="#cb28-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-636"><a href="#cb28-636" aria-hidden="true" tabindex="-1"></a>weights_q2 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(train_q2<span class="sc">$</span>Attrition_Binary <span class="sc">==</span> <span class="dv">1</span>, w_pos2, w_neg2)</span>
<span id="cb28-637"><a href="#cb28-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-638"><a href="#cb28-638" aria-hidden="true" tabindex="-1"></a>logit_q2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb28-639"><a href="#cb28-639" aria-hidden="true" tabindex="-1"></a>  Attrition_Binary <span class="sc">~</span> YearsSinceLastPromotion <span class="sc">+</span> YearsInCurrentRole <span class="sc">+</span></span>
<span id="cb28-640"><a href="#cb28-640" aria-hidden="true" tabindex="-1"></a>    MonthlyIncome <span class="sc">+</span> PercentSalaryHike <span class="sc">+</span> JobLevel,</span>
<span id="cb28-641"><a href="#cb28-641" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> train_q2,</span>
<span id="cb28-642"><a href="#cb28-642" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>(),</span>
<span id="cb28-643"><a href="#cb28-643" aria-hidden="true" tabindex="-1"></a>  <span class="at">weights =</span> weights_q2</span>
<span id="cb28-644"><a href="#cb28-644" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-645"><a href="#cb28-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-646"><a href="#cb28-646" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(logit_q2)</span>
<span id="cb28-647"><a href="#cb28-647" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-648"><a href="#cb28-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-649"><a href="#cb28-649" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q2-odds-ratios}</span></span>
<span id="cb28-650"><a href="#cb28-650" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q2-odds-ratios</span></span>
<span id="cb28-651"><a href="#cb28-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-652"><a href="#cb28-652" aria-hidden="true" tabindex="-1"></a>or_ci_q2 <span class="ot">&lt;-</span> <span class="fu">suppressMessages</span>(<span class="fu">confint</span>(logit_q2))</span>
<span id="cb28-653"><a href="#cb28-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-654"><a href="#cb28-654" aria-hidden="true" tabindex="-1"></a>or_table_q2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-655"><a href="#cb28-655" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">names</span>(<span class="fu">coef</span>(logit_q2)),</span>
<span id="cb28-656"><a href="#cb28-656" aria-hidden="true" tabindex="-1"></a>  <span class="at">Coefficient =</span> <span class="fu">coef</span>(logit_q2),</span>
<span id="cb28-657"><a href="#cb28-657" aria-hidden="true" tabindex="-1"></a>  <span class="at">OR =</span> <span class="fu">exp</span>(<span class="fu">coef</span>(logit_q2)),</span>
<span id="cb28-658"><a href="#cb28-658" aria-hidden="true" tabindex="-1"></a>  <span class="at">CI_Lower =</span> <span class="fu">exp</span>(or_ci_q2[, <span class="dv">1</span>]),</span>
<span id="cb28-659"><a href="#cb28-659" aria-hidden="true" tabindex="-1"></a>  <span class="at">CI_Upper =</span> <span class="fu">exp</span>(or_ci_q2[, <span class="dv">2</span>]),</span>
<span id="cb28-660"><a href="#cb28-660" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_value =</span> <span class="fu">summary</span>(logit_q2)<span class="sc">$</span>coefficients[, <span class="dv">4</span>]</span>
<span id="cb28-661"><a href="#cb28-661" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-662"><a href="#cb28-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-663"><a href="#cb28-663" aria-hidden="true" tabindex="-1"></a>or_table_q2<span class="sc">$</span>Significance <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(or_table_q2<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.001</span>, <span class="st">"***"</span>,</span>
<span id="cb28-664"><a href="#cb28-664" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">ifelse</span>(or_table_q2<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.01</span>, <span class="st">"**"</span>,</span>
<span id="cb28-665"><a href="#cb28-665" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">ifelse</span>(or_table_q2<span class="sc">$</span>p_value <span class="sc">&lt;</span> <span class="fl">0.05</span>, <span class="st">"*"</span>, <span class="st">""</span>)))</span>
<span id="cb28-666"><a href="#cb28-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-667"><a href="#cb28-667" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(or_table_q2[<span class="sc">-</span><span class="dv">1</span>, ],</span>
<span id="cb28-668"><a href="#cb28-668" aria-hidden="true" tabindex="-1"></a>      <span class="at">digits =</span> <span class="dv">4</span>,</span>
<span id="cb28-669"><a href="#cb28-669" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Table 5: Weighted Logistic Regression Odds Ratios (Q2)"</span>,</span>
<span id="cb28-670"><a href="#cb28-670" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Variable"</span>, <span class="st">"β"</span>, <span class="st">"OR"</span>, <span class="st">"95% CI Lower"</span>, <span class="st">"95% CI Upper"</span>, <span class="st">"p-value"</span>, <span class="st">"Sig."</span>),</span>
<span id="cb28-671"><a href="#cb28-671" aria-hidden="true" tabindex="-1"></a>      <span class="at">row.names =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-672"><a href="#cb28-672" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-673"><a href="#cb28-673" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-674"><a href="#cb28-674" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-675"><a href="#cb28-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-676"><a href="#cb28-676" aria-hidden="true" tabindex="-1"></a><span class="fu">## LASSO Variable Selection</span></span>
<span id="cb28-677"><a href="#cb28-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-678"><a href="#cb28-678" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q2-lasso}</span></span>
<span id="cb28-679"><a href="#cb28-679" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q2-lasso</span></span>
<span id="cb28-680"><a href="#cb28-680" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 8: LASSO Cross-Validation"</span></span>
<span id="cb28-681"><a href="#cb28-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-682"><a href="#cb28-682" aria-hidden="true" tabindex="-1"></a>lasso_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb28-683"><a href="#cb28-683" aria-hidden="true" tabindex="-1"></a>  <span class="st">"YearsSinceLastPromotion"</span>, <span class="st">"YearsInCurrentRole"</span>, <span class="st">"MonthlyIncome"</span>,</span>
<span id="cb28-684"><a href="#cb28-684" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PercentSalaryHike"</span>, <span class="st">"JobLevel"</span>, <span class="st">"Age"</span>, <span class="st">"TotalWorkingYears"</span>,</span>
<span id="cb28-685"><a href="#cb28-685" aria-hidden="true" tabindex="-1"></a>  <span class="st">"YearsAtCompany"</span>, <span class="st">"YearsWithCurrManager"</span>, <span class="st">"DistanceFromHome"</span>,</span>
<span id="cb28-686"><a href="#cb28-686" aria-hidden="true" tabindex="-1"></a>  <span class="st">"JobSatisfaction"</span>, <span class="st">"EnvironmentSatisfaction"</span>, <span class="st">"WorkLifeBalance"</span>,</span>
<span id="cb28-687"><a href="#cb28-687" aria-hidden="true" tabindex="-1"></a>  <span class="st">"OverTime_Binary"</span>, <span class="st">"NumCompaniesWorked"</span>, <span class="st">"StockOptionLevel"</span></span>
<span id="cb28-688"><a href="#cb28-688" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-689"><a href="#cb28-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-690"><a href="#cb28-690" aria-hidden="true" tabindex="-1"></a>X_lasso <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(hr_data[, lasso_vars])</span>
<span id="cb28-691"><a href="#cb28-691" aria-hidden="true" tabindex="-1"></a>y_lasso <span class="ot">&lt;-</span> hr_data<span class="sc">$</span>Attrition_Binary</span>
<span id="cb28-692"><a href="#cb28-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-693"><a href="#cb28-693" aria-hidden="true" tabindex="-1"></a>cv_lasso <span class="ot">&lt;-</span> <span class="fu">cv.glmnet</span>(X_lasso, y_lasso, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">nfolds =</span> <span class="dv">10</span>)</span>
<span id="cb28-694"><a href="#cb28-694" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cv_lasso, <span class="at">main =</span> <span class="st">"LASSO Cross-Validation"</span>)</span>
<span id="cb28-695"><a href="#cb28-695" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-696"><a href="#cb28-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-697"><a href="#cb28-697" aria-hidden="true" tabindex="-1"></a><span class="in">```{r lasso-coefficients}</span></span>
<span id="cb28-698"><a href="#cb28-698" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: lasso-coefficients</span></span>
<span id="cb28-699"><a href="#cb28-699" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 9: LASSO Selected Variable Coefficients"</span></span>
<span id="cb28-700"><a href="#cb28-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-701"><a href="#cb28-701" aria-hidden="true" tabindex="-1"></a>lasso_coefs <span class="ot">&lt;-</span> <span class="fu">coef</span>(cv_lasso, <span class="at">s =</span> <span class="st">"lambda.min"</span>)</span>
<span id="cb28-702"><a href="#cb28-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-703"><a href="#cb28-703" aria-hidden="true" tabindex="-1"></a>lasso_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-704"><a href="#cb28-704" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">rownames</span>(lasso_coefs)[<span class="sc">-</span><span class="dv">1</span>],</span>
<span id="cb28-705"><a href="#cb28-705" aria-hidden="true" tabindex="-1"></a>  <span class="at">Coefficient =</span> <span class="fu">as.vector</span>(lasso_coefs)[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb28-706"><a href="#cb28-706" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb28-707"><a href="#cb28-707" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">abs</span>(Coefficient) <span class="sc">&gt;</span> <span class="fl">0.001</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-708"><a href="#cb28-708" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="fu">abs</span>(Coefficient)))</span>
<span id="cb28-709"><a href="#cb28-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-710"><a href="#cb28-710" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lasso_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Variable, Coefficient), <span class="at">y =</span> Coefficient,</span>
<span id="cb28-711"><a href="#cb28-711" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> <span class="fu">ifelse</span>(Coefficient <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"Positive"</span>, <span class="st">"Negative"</span>))) <span class="sc">+</span></span>
<span id="cb28-712"><a href="#cb28-712" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb28-713"><a href="#cb28-713" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb28-714"><a href="#cb28-714" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Variable"</span>, <span class="at">y =</span> <span class="st">"LASSO Coefficient"</span>,</span>
<span id="cb28-715"><a href="#cb28-715" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"LASSO Variable Selection"</span>,</span>
<span id="cb28-716"><a href="#cb28-716" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">"Variables with non-zero coefficients at λ.min ="</span>, <span class="fu">round</span>(cv_lasso<span class="sc">$</span>lambda.min, <span class="dv">4</span>)),</span>
<span id="cb28-717"><a href="#cb28-717" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Effect"</span>) <span class="sc">+</span></span>
<span id="cb28-718"><a href="#cb28-718" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-719"><a href="#cb28-719" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">14</span>))</span>
<span id="cb28-720"><a href="#cb28-720" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-721"><a href="#cb28-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-722"><a href="#cb28-722" aria-hidden="true" tabindex="-1"></a><span class="in">```{r lasso-table}</span></span>
<span id="cb28-723"><a href="#cb28-723" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: lasso-table</span></span>
<span id="cb28-724"><a href="#cb28-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-725"><a href="#cb28-725" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(lasso_df,</span>
<span id="cb28-726"><a href="#cb28-726" aria-hidden="true" tabindex="-1"></a>      <span class="at">digits =</span> <span class="dv">4</span>,</span>
<span id="cb28-727"><a href="#cb28-727" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Table 6: LASSO Selected Variables"</span>,</span>
<span id="cb28-728"><a href="#cb28-728" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Variable"</span>, <span class="st">"Coefficient"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-729"><a href="#cb28-729" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-730"><a href="#cb28-730" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-731"><a href="#cb28-731" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-732"><a href="#cb28-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-733"><a href="#cb28-733" aria-hidden="true" tabindex="-1"></a><span class="fu">## ROC-AUC and Threshold Analysis (Test Set)</span></span>
<span id="cb28-734"><a href="#cb28-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-735"><a href="#cb28-735" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q2-roc-threshold}</span></span>
<span id="cb28-736"><a href="#cb28-736" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q2-roc-threshold</span></span>
<span id="cb28-737"><a href="#cb28-737" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 10: ROC Curve and Threshold Analysis (Test Set)"</span></span>
<span id="cb28-738"><a href="#cb28-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-739"><a href="#cb28-739" aria-hidden="true" tabindex="-1"></a>pred_probs_q2 <span class="ot">&lt;-</span> <span class="fu">predict</span>(logit_q2, <span class="at">newdata =</span> test_q2, <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb28-740"><a href="#cb28-740" aria-hidden="true" tabindex="-1"></a>roc_q2 <span class="ot">&lt;-</span> <span class="fu">roc</span>(test_q2<span class="sc">$</span>Attrition_Binary, pred_probs_q2)</span>
<span id="cb28-741"><a href="#cb28-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-742"><a href="#cb28-742" aria-hidden="true" tabindex="-1"></a>coords_best <span class="ot">&lt;-</span> <span class="fu">coords</span>(roc_q2, <span class="st">"best"</span>, <span class="at">ret =</span> <span class="fu">c</span>(<span class="st">"threshold"</span>, <span class="st">"sensitivity"</span>, <span class="st">"specificity"</span>))</span>
<span id="cb28-743"><a href="#cb28-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-744"><a href="#cb28-744" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb28-745"><a href="#cb28-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-746"><a href="#cb28-746" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(roc_q2, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">main =</span> <span class="st">"ROC Curve - Career Stagnation Model (Test Set)"</span>)</span>
<span id="cb28-747"><a href="#cb28-747" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(coords_best<span class="sc">$</span>specificity, coords_best<span class="sc">$</span>sensitivity, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">cex =</span> <span class="fl">1.5</span>)</span>
<span id="cb28-748"><a href="#cb28-748" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(coords_best<span class="sc">$</span>specificity <span class="sc">-</span> <span class="fl">0.1</span>, coords_best<span class="sc">$</span>sensitivity <span class="sc">+</span> <span class="fl">0.05</span>,</span>
<span id="cb28-749"><a href="#cb28-749" aria-hidden="true" tabindex="-1"></a>     <span class="fu">paste</span>(<span class="st">"Optimal:"</span>, <span class="fu">round</span>(coords_best<span class="sc">$</span>threshold, <span class="dv">3</span>)))</span>
<span id="cb28-750"><a href="#cb28-750" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"bottomright"</span>, <span class="fu">paste</span>(<span class="st">"AUC ="</span>, <span class="fu">round</span>(<span class="fu">auc</span>(roc_q2), <span class="dv">3</span>)), <span class="at">bty =</span> <span class="st">"n"</span>)</span>
<span id="cb28-751"><a href="#cb28-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-752"><a href="#cb28-752" aria-hidden="true" tabindex="-1"></a>thresholds <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="at">by =</span> <span class="fl">0.05</span>)</span>
<span id="cb28-753"><a href="#cb28-753" aria-hidden="true" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> <span class="fu">sapply</span>(thresholds, <span class="cf">function</span>(t) {</span>
<span id="cb28-754"><a href="#cb28-754" aria-hidden="true" tabindex="-1"></a>  pred <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(pred_probs_q2 <span class="sc">&gt;=</span> t, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb28-755"><a href="#cb28-755" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="at">Sensitivity =</span> <span class="fu">mean</span>(pred[test_q2<span class="sc">$</span>Attrition_Binary <span class="sc">==</span> <span class="dv">1</span>] <span class="sc">==</span> <span class="dv">1</span>),</span>
<span id="cb28-756"><a href="#cb28-756" aria-hidden="true" tabindex="-1"></a>    <span class="at">Specificity =</span> <span class="fu">mean</span>(pred[test_q2<span class="sc">$</span>Attrition_Binary <span class="sc">==</span> <span class="dv">0</span>] <span class="sc">==</span> <span class="dv">0</span>),</span>
<span id="cb28-757"><a href="#cb28-757" aria-hidden="true" tabindex="-1"></a>    <span class="at">Accuracy =</span> <span class="fu">mean</span>(pred <span class="sc">==</span> test_q2<span class="sc">$</span>Attrition_Binary))</span>
<span id="cb28-758"><a href="#cb28-758" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb28-759"><a href="#cb28-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-760"><a href="#cb28-760" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(thresholds, metrics[<span class="st">"Sensitivity"</span>, ], <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">lwd =</span> <span class="dv">2</span>,</span>
<span id="cb28-761"><a href="#cb28-761" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">xlab =</span> <span class="st">"Threshold"</span>, <span class="at">ylab =</span> <span class="st">"Metric Value"</span>,</span>
<span id="cb28-762"><a href="#cb28-762" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Classification Metrics vs Threshold"</span>)</span>
<span id="cb28-763"><a href="#cb28-763" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(thresholds, metrics[<span class="st">"Specificity"</span>, ], <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb28-764"><a href="#cb28-764" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(thresholds, metrics[<span class="st">"Accuracy"</span>, ], <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb28-765"><a href="#cb28-765" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> coords_best<span class="sc">$</span>threshold, <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb28-766"><a href="#cb28-766" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"right"</span>, <span class="fu">c</span>(<span class="st">"Sensitivity"</span>, <span class="st">"Specificity"</span>, <span class="st">"Accuracy"</span>), <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb28-767"><a href="#cb28-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-768"><a href="#cb28-768" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb28-769"><a href="#cb28-769" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-770"><a href="#cb28-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-771"><a href="#cb28-771" aria-hidden="true" tabindex="-1"></a><span class="in">```{r threshold-table}</span></span>
<span id="cb28-772"><a href="#cb28-772" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: threshold-table</span></span>
<span id="cb28-773"><a href="#cb28-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-774"><a href="#cb28-774" aria-hidden="true" tabindex="-1"></a>threshold_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-775"><a href="#cb28-775" aria-hidden="true" tabindex="-1"></a>  <span class="at">Threshold =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.4</span>, <span class="fl">0.5</span>, <span class="fu">round</span>(coords_best<span class="sc">$</span>threshold, <span class="dv">3</span>)),</span>
<span id="cb28-776"><a href="#cb28-776" aria-hidden="true" tabindex="-1"></a>  <span class="at">Sensitivity =</span> <span class="fu">numeric</span>(<span class="dv">6</span>),</span>
<span id="cb28-777"><a href="#cb28-777" aria-hidden="true" tabindex="-1"></a>  <span class="at">Specificity =</span> <span class="fu">numeric</span>(<span class="dv">6</span>),</span>
<span id="cb28-778"><a href="#cb28-778" aria-hidden="true" tabindex="-1"></a>  <span class="at">Accuracy =</span> <span class="fu">numeric</span>(<span class="dv">6</span>)</span>
<span id="cb28-779"><a href="#cb28-779" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-780"><a href="#cb28-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-781"><a href="#cb28-781" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) {</span>
<span id="cb28-782"><a href="#cb28-782" aria-hidden="true" tabindex="-1"></a>  t <span class="ot">&lt;-</span> threshold_results<span class="sc">$</span>Threshold[i]</span>
<span id="cb28-783"><a href="#cb28-783" aria-hidden="true" tabindex="-1"></a>  pred <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(pred_probs_q2 <span class="sc">&gt;=</span> t, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb28-784"><a href="#cb28-784" aria-hidden="true" tabindex="-1"></a>  threshold_results<span class="sc">$</span>Sensitivity[i] <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(pred[test_q2<span class="sc">$</span>Attrition_Binary <span class="sc">==</span> <span class="dv">1</span>] <span class="sc">==</span> <span class="dv">1</span>), <span class="dv">3</span>)</span>
<span id="cb28-785"><a href="#cb28-785" aria-hidden="true" tabindex="-1"></a>  threshold_results<span class="sc">$</span>Specificity[i] <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(pred[test_q2<span class="sc">$</span>Attrition_Binary <span class="sc">==</span> <span class="dv">0</span>] <span class="sc">==</span> <span class="dv">0</span>), <span class="dv">3</span>)</span>
<span id="cb28-786"><a href="#cb28-786" aria-hidden="true" tabindex="-1"></a>  threshold_results<span class="sc">$</span>Accuracy[i] <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">mean</span>(pred <span class="sc">==</span> test_q2<span class="sc">$</span>Attrition_Binary), <span class="dv">3</span>)</span>
<span id="cb28-787"><a href="#cb28-787" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-788"><a href="#cb28-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-789"><a href="#cb28-789" aria-hidden="true" tabindex="-1"></a>threshold_results<span class="sc">$</span>Note <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">"← Optimal (Youden's J)"</span>)</span>
<span id="cb28-790"><a href="#cb28-790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-791"><a href="#cb28-791" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(threshold_results,</span>
<span id="cb28-792"><a href="#cb28-792" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Table 7: Classification Performance at Different Thresholds (Test Set)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-793"><a href="#cb28-793" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-794"><a href="#cb28-794" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="dv">6</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>, <span class="at">background =</span> <span class="st">"#d4edda"</span>)</span>
<span id="cb28-795"><a href="#cb28-795" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-796"><a href="#cb28-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-797"><a href="#cb28-797" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb28-798"><a href="#cb28-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-799"><a href="#cb28-799" aria-hidden="true" tabindex="-1"></a><span class="fu"># Research Question 3</span></span>
<span id="cb28-800"><a href="#cb28-800" aria-hidden="true" tabindex="-1"></a><span class="fu">## Department-Stratified Satisfaction Analysis {.unnumbered}</span></span>
<span id="cb28-801"><a href="#cb28-801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-802"><a href="#cb28-802" aria-hidden="true" tabindex="-1"></a>**Does the predictive power of employee satisfaction variables differ across departments?**</span>
<span id="cb28-803"><a href="#cb28-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-804"><a href="#cb28-804" aria-hidden="true" tabindex="-1"></a><span class="fu">## VIF Analysis for Multicollinearity</span></span>
<span id="cb28-805"><a href="#cb28-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-806"><a href="#cb28-806" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q3-vif}</span></span>
<span id="cb28-807"><a href="#cb28-807" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q3-vif</span></span>
<span id="cb28-808"><a href="#cb28-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-809"><a href="#cb28-809" aria-hidden="true" tabindex="-1"></a>vif_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb28-810"><a href="#cb28-810" aria-hidden="true" tabindex="-1"></a>  Attrition_Binary <span class="sc">~</span> JobSatisfaction <span class="sc">+</span> EnvironmentSatisfaction <span class="sc">+</span> RelationshipSatisfaction <span class="sc">+</span></span>
<span id="cb28-811"><a href="#cb28-811" aria-hidden="true" tabindex="-1"></a>    WorkLifeBalance <span class="sc">+</span> JobInvolvement <span class="sc">+</span> MonthlyIncome <span class="sc">+</span> Age,</span>
<span id="cb28-812"><a href="#cb28-812" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> hr_data</span>
<span id="cb28-813"><a href="#cb28-813" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-814"><a href="#cb28-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-815"><a href="#cb28-815" aria-hidden="true" tabindex="-1"></a>vif_vals <span class="ot">&lt;-</span> <span class="fu">vif</span>(vif_model)</span>
<span id="cb28-816"><a href="#cb28-816" aria-hidden="true" tabindex="-1"></a>vif_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-817"><a href="#cb28-817" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">names</span>(vif_vals),</span>
<span id="cb28-818"><a href="#cb28-818" aria-hidden="true" tabindex="-1"></a>  <span class="at">VIF =</span> <span class="fu">round</span>(<span class="fu">as.numeric</span>(vif_vals), <span class="dv">4</span>)</span>
<span id="cb28-819"><a href="#cb28-819" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-820"><a href="#cb28-820" aria-hidden="true" tabindex="-1"></a>vif_results<span class="sc">$</span>Status <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(vif_results<span class="sc">$</span>VIF <span class="sc">&lt;</span> <span class="dv">5</span>, <span class="st">"OK"</span>,</span>
<span id="cb28-821"><a href="#cb28-821" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">ifelse</span>(vif_results<span class="sc">$</span>VIF <span class="sc">&lt;</span> <span class="dv">10</span>, <span class="st">"Moderate"</span>, <span class="st">"HIGH"</span>))</span>
<span id="cb28-822"><a href="#cb28-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-823"><a href="#cb28-823" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(vif_results,</span>
<span id="cb28-824"><a href="#cb28-824" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Table 8: Variance Inflation Factors (VIF)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-825"><a href="#cb28-825" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-826"><a href="#cb28-826" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-827"><a href="#cb28-827" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-828"><a href="#cb28-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-829"><a href="#cb28-829" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> style</span><span class="op">=</span><span class="st">"color: orange; font-weight: bold;"</span><span class="dt">&gt;</span>Why are these 7 variables being selected for VIF? I get the 3 satisfaction variables because they were mentioned in the data set description as being used for question 3, but why the others? There are a lot of outputs in the project, but I'm not sure why the specific variables or methods were chosen<span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span></span>
<span id="cb28-830"><a href="#cb28-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-831"><a href="#cb28-831" aria-hidden="true" tabindex="-1"></a>The Variance Inflation Factor (VIF) analysis for the selected variables indicates that there is no evidence of multicollinearity among the independent variables included in the model. All VIF values are very close to 1, ranging from approximately 1.00 to 1.34, which suggests that each predictor has minimal correlation with the others. Since all values are well below commonly accepted thresholds (such as 5 or 10), multicollinearity is not a concern in this analysis. Therefore, all variables can be retained in the model without risk of inflated standard errors or unstable coefficient estimates.</span>
<span id="cb28-832"><a href="#cb28-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-833"><a href="#cb28-833" aria-hidden="true" tabindex="-1"></a><span class="fu">## Stratified Logistic Regression by Department</span></span>
<span id="cb28-834"><a href="#cb28-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-835"><a href="#cb28-835" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q3-stratified}</span></span>
<span id="cb28-836"><a href="#cb28-836" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q3-stratified</span></span>
<span id="cb28-837"><a href="#cb28-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-838"><a href="#cb28-838" aria-hidden="true" tabindex="-1"></a>departments <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(<span class="fu">as.character</span>(hr_data<span class="sc">$</span>Department)))</span>
<span id="cb28-839"><a href="#cb28-839" aria-hidden="true" tabindex="-1"></a>dept_results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb28-840"><a href="#cb28-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-841"><a href="#cb28-841" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (dept <span class="cf">in</span> departments) {</span>
<span id="cb28-842"><a href="#cb28-842" aria-hidden="true" tabindex="-1"></a>  df_dept <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Department <span class="sc">==</span> dept)</span>
<span id="cb28-843"><a href="#cb28-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-844"><a href="#cb28-844" aria-hidden="true" tabindex="-1"></a>  model_dept <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb28-845"><a href="#cb28-845" aria-hidden="true" tabindex="-1"></a>    Attrition_Binary <span class="sc">~</span> JobSatisfaction <span class="sc">+</span> EnvironmentSatisfaction <span class="sc">+</span> RelationshipSatisfaction,</span>
<span id="cb28-846"><a href="#cb28-846" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> df_dept,</span>
<span id="cb28-847"><a href="#cb28-847" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="fu">binomial</span>()</span>
<span id="cb28-848"><a href="#cb28-848" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-849"><a href="#cb28-849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-850"><a href="#cb28-850" aria-hidden="true" tabindex="-1"></a>  dept_results[[dept]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb28-851"><a href="#cb28-851" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">nrow</span>(df_dept),</span>
<span id="cb28-852"><a href="#cb28-852" aria-hidden="true" tabindex="-1"></a>    <span class="at">attrition_rate =</span> <span class="fu">mean</span>(df_dept<span class="sc">$</span>Attrition_Binary) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb28-853"><a href="#cb28-853" aria-hidden="true" tabindex="-1"></a>    <span class="at">model =</span> model_dept,</span>
<span id="cb28-854"><a href="#cb28-854" aria-hidden="true" tabindex="-1"></a>    <span class="at">aic =</span> <span class="fu">AIC</span>(model_dept)</span>
<span id="cb28-855"><a href="#cb28-855" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-856"><a href="#cb28-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-857"><a href="#cb28-857" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">========================================</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-858"><a href="#cb28-858" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"DEPARTMENT:"</span>, dept, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-859"><a href="#cb28-859" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"========================================</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-860"><a href="#cb28-860" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sample Size:"</span>, dept_results[[dept]]<span class="sc">$</span>n, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-861"><a href="#cb28-861" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Attrition Rate:"</span>, <span class="fu">round</span>(dept_results[[dept]]<span class="sc">$</span>attrition_rate, <span class="dv">1</span>), <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-862"><a href="#cb28-862" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">summary</span>(model_dept))</span>
<span id="cb28-863"><a href="#cb28-863" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-864"><a href="#cb28-864" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-865"><a href="#cb28-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-866"><a href="#cb28-866" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q3-coefficient-comparison}</span></span>
<span id="cb28-867"><a href="#cb28-867" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q3-coefficient-comparison</span></span>
<span id="cb28-868"><a href="#cb28-868" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 11: Satisfaction Variable Coefficients by Department"</span></span>
<span id="cb28-869"><a href="#cb28-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-870"><a href="#cb28-870" aria-hidden="true" tabindex="-1"></a>coef_comparison <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-871"><a href="#cb28-871" aria-hidden="true" tabindex="-1"></a>  <span class="at">Department =</span> <span class="fu">character</span>(),</span>
<span id="cb28-872"><a href="#cb28-872" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">character</span>(),</span>
<span id="cb28-873"><a href="#cb28-873" aria-hidden="true" tabindex="-1"></a>  <span class="at">Coefficient =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-874"><a href="#cb28-874" aria-hidden="true" tabindex="-1"></a>  <span class="at">OR =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-875"><a href="#cb28-875" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_value =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-876"><a href="#cb28-876" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb28-877"><a href="#cb28-877" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-878"><a href="#cb28-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-879"><a href="#cb28-879" aria-hidden="true" tabindex="-1"></a>satisfaction_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"JobSatisfaction"</span>, <span class="st">"EnvironmentSatisfaction"</span>, <span class="st">"RelationshipSatisfaction"</span>)</span>
<span id="cb28-880"><a href="#cb28-880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-881"><a href="#cb28-881" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (dept <span class="cf">in</span> <span class="fu">names</span>(dept_results)) {</span>
<span id="cb28-882"><a href="#cb28-882" aria-hidden="true" tabindex="-1"></a>  model <span class="ot">&lt;-</span> dept_results[[dept]]<span class="sc">$</span>model</span>
<span id="cb28-883"><a href="#cb28-883" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (var <span class="cf">in</span> satisfaction_vars) {</span>
<span id="cb28-884"><a href="#cb28-884" aria-hidden="true" tabindex="-1"></a>    coef_comparison <span class="ot">&lt;-</span> <span class="fu">rbind</span>(coef_comparison, <span class="fu">data.frame</span>(</span>
<span id="cb28-885"><a href="#cb28-885" aria-hidden="true" tabindex="-1"></a>      <span class="at">Department =</span> dept,</span>
<span id="cb28-886"><a href="#cb28-886" aria-hidden="true" tabindex="-1"></a>      <span class="at">Variable =</span> var,</span>
<span id="cb28-887"><a href="#cb28-887" aria-hidden="true" tabindex="-1"></a>      <span class="at">Coefficient =</span> <span class="fu">coef</span>(model)[var],</span>
<span id="cb28-888"><a href="#cb28-888" aria-hidden="true" tabindex="-1"></a>      <span class="at">OR =</span> <span class="fu">exp</span>(<span class="fu">coef</span>(model)[var]),</span>
<span id="cb28-889"><a href="#cb28-889" aria-hidden="true" tabindex="-1"></a>      <span class="at">p_value =</span> <span class="fu">summary</span>(model)<span class="sc">$</span>coefficients[var, <span class="dv">4</span>]</span>
<span id="cb28-890"><a href="#cb28-890" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb28-891"><a href="#cb28-891" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-892"><a href="#cb28-892" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-893"><a href="#cb28-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-894"><a href="#cb28-894" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(coef_comparison, <span class="fu">aes</span>(<span class="at">x =</span> Variable, <span class="at">y =</span> Coefficient, <span class="at">fill =</span> Department)) <span class="sc">+</span></span>
<span id="cb28-895"><a href="#cb28-895" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb28-896"><a href="#cb28-896" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb28-897"><a href="#cb28-897" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Satisfaction Variable"</span>, <span class="at">y =</span> <span class="st">"Coefficient (Log-Odds)"</span>,</span>
<span id="cb28-898"><a href="#cb28-898" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Satisfaction Variable Effects by Department"</span>,</span>
<span id="cb28-899"><a href="#cb28-899" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Negative coefficients indicate protective effect against attrition"</span>) <span class="sc">+</span></span>
<span id="cb28-900"><a href="#cb28-900" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-901"><a href="#cb28-901" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb28-902"><a href="#cb28-902" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">15</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb28-903"><a href="#cb28-903" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-904"><a href="#cb28-904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-905"><a href="#cb28-905" aria-hidden="true" tabindex="-1"></a><span class="in">```{r q3-performance-comparison}</span></span>
<span id="cb28-906"><a href="#cb28-906" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: q3-performance-comparison</span></span>
<span id="cb28-907"><a href="#cb28-907" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Figure 12: Model Performance by Department"</span></span>
<span id="cb28-908"><a href="#cb28-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-909"><a href="#cb28-909" aria-hidden="true" tabindex="-1"></a>dept_performance <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-910"><a href="#cb28-910" aria-hidden="true" tabindex="-1"></a>  <span class="at">Department =</span> <span class="fu">character</span>(),</span>
<span id="cb28-911"><a href="#cb28-911" aria-hidden="true" tabindex="-1"></a>  <span class="at">N =</span> <span class="fu">integer</span>(),</span>
<span id="cb28-912"><a href="#cb28-912" aria-hidden="true" tabindex="-1"></a>  <span class="at">Attrition_Rate =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-913"><a href="#cb28-913" aria-hidden="true" tabindex="-1"></a>  <span class="at">AIC =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-914"><a href="#cb28-914" aria-hidden="true" tabindex="-1"></a>  <span class="at">AUC =</span> <span class="fu">numeric</span>(),</span>
<span id="cb28-915"><a href="#cb28-915" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb28-916"><a href="#cb28-916" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-917"><a href="#cb28-917" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-918"><a href="#cb28-918" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (dept <span class="cf">in</span> <span class="fu">names</span>(dept_results)) {</span>
<span id="cb28-919"><a href="#cb28-919" aria-hidden="true" tabindex="-1"></a>  df_dept <span class="ot">&lt;-</span> hr_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Department <span class="sc">==</span> dept)</span>
<span id="cb28-920"><a href="#cb28-920" aria-hidden="true" tabindex="-1"></a>  model <span class="ot">&lt;-</span> dept_results[[dept]]<span class="sc">$</span>model</span>
<span id="cb28-921"><a href="#cb28-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-922"><a href="#cb28-922" aria-hidden="true" tabindex="-1"></a>  pred_probs <span class="ot">&lt;-</span> <span class="fu">predict</span>(model, <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb28-923"><a href="#cb28-923" aria-hidden="true" tabindex="-1"></a>  roc_dept <span class="ot">&lt;-</span> <span class="fu">roc</span>(df_dept<span class="sc">$</span>Attrition_Binary, pred_probs, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-924"><a href="#cb28-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-925"><a href="#cb28-925" aria-hidden="true" tabindex="-1"></a>  dept_performance <span class="ot">&lt;-</span> <span class="fu">rbind</span>(dept_performance, <span class="fu">data.frame</span>(</span>
<span id="cb28-926"><a href="#cb28-926" aria-hidden="true" tabindex="-1"></a>    <span class="at">Department =</span> dept,</span>
<span id="cb28-927"><a href="#cb28-927" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> dept_results[[dept]]<span class="sc">$</span>n,</span>
<span id="cb28-928"><a href="#cb28-928" aria-hidden="true" tabindex="-1"></a>    <span class="at">Attrition_Rate =</span> <span class="fu">round</span>(dept_results[[dept]]<span class="sc">$</span>attrition_rate, <span class="dv">1</span>),</span>
<span id="cb28-929"><a href="#cb28-929" aria-hidden="true" tabindex="-1"></a>    <span class="at">AIC =</span> <span class="fu">round</span>(dept_results[[dept]]<span class="sc">$</span>aic, <span class="dv">2</span>),</span>
<span id="cb28-930"><a href="#cb28-930" aria-hidden="true" tabindex="-1"></a>    <span class="at">AUC =</span> <span class="fu">round</span>(<span class="fu">auc</span>(roc_dept), <span class="dv">3</span>)</span>
<span id="cb28-931"><a href="#cb28-931" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb28-932"><a href="#cb28-932" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-933"><a href="#cb28-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-934"><a href="#cb28-934" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(dept_performance,</span>
<span id="cb28-935"><a href="#cb28-935" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Table 9: Department Model Comparison"</span>,</span>
<span id="cb28-936"><a href="#cb28-936" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Department"</span>, <span class="st">"N"</span>, <span class="st">"Attrition Rate (%)"</span>, <span class="st">"AIC"</span>, <span class="st">"AUC"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-937"><a href="#cb28-937" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-938"><a href="#cb28-938" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-939"><a href="#cb28-939" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-940"><a href="#cb28-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-941"><a href="#cb28-941" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb28-942"><a href="#cb28-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-943"><a href="#cb28-943" aria-hidden="true" tabindex="-1"></a>The stratified logistic regression results reveal notable differences across departments in how satisfaction metrics relate to attrition.</span>
<span id="cb28-944"><a href="#cb28-944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-945"><a href="#cb28-945" aria-hidden="true" tabindex="-1"></a>In the HR department (n = 63, 19% attrition), none of the predictors (JobSatisfaction, EnvironmentSatisfaction, or RelationshipSatisfaction) are statistically significant, likely due to the small sample size, though the output suggests that higher job and environment satisfaction ratings could reduce attrition.</span>
<span id="cb28-946"><a href="#cb28-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-947"><a href="#cb28-947" aria-hidden="true" tabindex="-1"></a>In R&amp;D (n = 961, 13.8% attrition), all three satisfaction measures are significant predictors: higher job, environment, and relationship satisfaction are associated with lower attrition, with job and environment satisfaction having the strongest effects. </span>
<span id="cb28-948"><a href="#cb28-948" aria-hidden="true" tabindex="-1"></a>In Sales (n = 446, 20.6% attrition), job and environment satisfaction significantly reduce attrition, while relationship satisfaction is not significant. Overall, the results suggest that the effect of satisfaction on attrition varies by department.</span>
<span id="cb28-949"><a href="#cb28-949" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-950"><a href="#cb28-950" aria-hidden="true" tabindex="-1"></a>R&amp;D appears most sensitive to satisfaction levels, with Sales being moderately sensitive, and HR shows no clear patterns, likely reflecting limited sample size or unmeasured factors. These findings indicate that department-specific strategies—focusing on improving job and environment satisfaction—could be most effective in reducing turnover, while HR may require a broader analysis of attrition drivers.</span>
<span id="cb28-951"><a href="#cb28-951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-952"><a href="#cb28-952" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb28-953"><a href="#cb28-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-954"><a href="#cb28-954" aria-hidden="true" tabindex="-1"></a><span class="fu"># Discussion and Conclusions</span></span>
<span id="cb28-955"><a href="#cb28-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-956"><a href="#cb28-956" aria-hidden="true" tabindex="-1"></a><span class="in">```{r summary-stats-final}</span></span>
<span id="cb28-957"><a href="#cb28-957" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: summary-stats-final</span></span>
<span id="cb28-958"><a href="#cb28-958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-959"><a href="#cb28-959" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"=============================================</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-960"><a href="#cb28-960" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"SUMMARY STATISTICS</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-961"><a href="#cb28-961" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"=============================================</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-962"><a href="#cb28-962" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Total Employees Analyzed:"</span>, <span class="fu">nrow</span>(hr_data), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-963"><a href="#cb28-963" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Overall Attrition Rate:"</span>, <span class="fu">round</span>(<span class="fu">mean</span>(hr_data<span class="sc">$</span>Attrition_Binary) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-964"><a href="#cb28-964" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"OverTime Attrition Rate:"</span>, <span class="fu">round</span>(overtime_attrition, <span class="dv">1</span>), <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-965"><a href="#cb28-965" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Non-OverTime Attrition Rate:"</span>,</span>
<span id="cb28-966"><a href="#cb28-966" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="fu">mean</span>(hr_data<span class="sc">$</span>Attrition_Binary[hr_data<span class="sc">$</span>OverTime <span class="sc">==</span> <span class="st">"No"</span>]) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-967"><a href="#cb28-967" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Best Model Performance:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-968"><a href="#cb28-968" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- Random Forest AUC (Q1):"</span>, <span class="fu">round</span>(<span class="fu">auc</span>(roc_rf), <span class="dv">3</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-969"><a href="#cb28-969" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- Weighted LR AUC (Q2 test):"</span>, <span class="fu">round</span>(<span class="fu">auc</span>(roc_q2), <span class="dv">3</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-970"><a href="#cb28-970" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- Optimal Threshold (Q2 test):"</span>, <span class="fu">round</span>(coords_best<span class="sc">$</span>threshold, <span class="dv">3</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-971"><a href="#cb28-971" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"- LASSO Variables Selected:"</span>, <span class="fu">nrow</span>(lasso_df), <span class="st">"of 16</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb28-972"><a href="#cb28-972" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-973"><a href="#cb28-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-974"><a href="#cb28-974" aria-hidden="true" tabindex="-1"></a><span class="fu">## Recommendations for HR Practice</span></span>
<span id="cb28-975"><a href="#cb28-975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-976"><a href="#cb28-976" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Monitor Overtime:** Overtime is consistently among the strongest predictors of attrition.</span>
<span id="cb28-977"><a href="#cb28-977" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Promotion Cadence:** Stagnation signals (especially time since last promotion) meaningfully shift attrition risk.</span>
<span id="cb28-978"><a href="#cb28-978" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Department-Specific Actions:** Satisfaction signals and their strengths differ by department.</span>
<span id="cb28-979"><a href="#cb28-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-980"><a href="#cb28-980" aria-hidden="true" tabindex="-1"></a><span class="fu">## Limitations</span></span>
<span id="cb28-981"><a href="#cb28-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-982"><a href="#cb28-982" aria-hidden="true" tabindex="-1"></a>Due to employee and corporate confidentiality concerns, publicly available datasets containing detailed employee information are limited. While the dataset used in this project serves as a realistic approximation of HR records for a large organization and can inform analyses and decision-making strategies relevant to real-world company data, it is still a synthetic dataset.</span>
<span id="cb28-983"><a href="#cb28-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-984"><a href="#cb28-984" aria-hidden="true" tabindex="-1"></a>Class imbalance within the dataset presented analytical challenges. Employee attrition, being a minority class, required careful threshold adjustments to ensure sensitivity and avoid biased predictive outcomes.</span>
<span id="cb28-985"><a href="#cb28-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-986"><a href="#cb28-986" aria-hidden="true" tabindex="-1"></a>The dataset did not include information regarding the reasons for employee departures. Distinguishing between voluntary resignations and terminations could have allowed for more targeted analyses, such as identifying employees the company might have retained versus those who were dismissed.</span>
<span id="cb28-987"><a href="#cb28-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-988"><a href="#cb28-988" aria-hidden="true" tabindex="-1"></a>The dataset represents a cross-sectional snapshot, which allows for the identification of associations but not causal relationships. Factors influencing attrition may vary significantly among individual employees, limiting the ability to draw definitive causal conclusions.</span>
<span id="cb28-989"><a href="#cb28-989" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-990"><a href="#cb28-990" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb28-991"><a href="#cb28-991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-992"><a href="#cb28-992" aria-hidden="true" tabindex="-1"></a><span class="fu"># References</span></span>
<span id="cb28-993"><a href="#cb28-993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-994"><a href="#cb28-994" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>IBM HR Analytics Employee Attrition Dataset. Available at: https://data.world/aaizemberg/hr-employee-attrition\</span>
<span id="cb28-995"><a href="#cb28-995" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>James, G., Witten, D., Hastie, T., &amp; Tibshirani, R. (2021). *An Introduction to Statistical Learning (2nd ed.).* Springer.\</span>
<span id="cb28-996"><a href="#cb28-996" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Hosmer, D. W., Lemeshow, S., &amp; Sturdivant, R. X. (2013). *Applied Logistic Regression (3rd ed.).* Wiley.\</span>
<span id="cb28-997"><a href="#cb28-997" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Breiman, L. (2001). Random Forests. *Machine Learning, 45*(1), 5–32.\</span>
<span id="cb28-998"><a href="#cb28-998" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>Tibshirani, R. (1996). Regression Shrinkage and Selection via the Lasso. *JRSS Series B, 58*(1), 267–288.\</span>
<span id="cb28-999"><a href="#cb28-999" aria-hidden="true" tabindex="-1"></a><span class="ss">6.  </span>R Core Team. (2024). *R: A Language and Environment for Statistical Computing.*</span>
<span id="cb28-1000"><a href="#cb28-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-1001"><a href="#cb28-1001" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb28-1002"><a href="#cb28-1002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-1003"><a href="#cb28-1003" aria-hidden="true" tabindex="-1"></a><span class="fu"># Appendix: Session Information</span></span>
<span id="cb28-1004"><a href="#cb28-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-1005"><a href="#cb28-1005" aria-hidden="true" tabindex="-1"></a><span class="in">```{r session-info}</span></span>
<span id="cb28-1006"><a href="#cb28-1006" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: session-info</span></span>
<span id="cb28-1007"><a href="#cb28-1007" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-1008"><a href="#cb28-1008" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span>
<span id="cb28-1009"><a href="#cb28-1009" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>STAT 515 Final Project | Rutvij &amp; Sean Grieg | George Mason University | Fall 2024</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>